{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js!D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\xdqgl\\xdqxxtb.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\xdqgl\\xdqxxtb.vue","mtime":1571748931836},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TableList from \"../../components/grid/TableList\";\nimport toolbar from \"@/components/toolbar/myToolbar\";\nimport createbar from \"@/views/xdqgl/myToolbar/xdqxxtbCreOperation\";\nimport _ from 'lodash';\nexport default {\n  name: \"xdqxxtb\",\n  components: {\n    TableList: TableList,\n    toolbar: toolbar,\n    createbar: createbar\n  },\n  data: function data() {\n    return {\n      searchTip: '',\n      // 字典表数据\n      provinces: [],\n      pilotLevels: [],\n      //查询时需获取页面数据\n      searchParams: {\n        pilotAreaName: '',\n        pilotLevelDm: '',\n        provinceDm: '',\n        startDate: '',\n        endDate: ''\n      },\n      createDialogVisible: false,\n      checkedData: [],\n      //全选框\n      //工具栏\n      toolbarItem: [{\n        type: \"primary\",\n        title: \"新建\",\n        icon: \"el-icon-edit-outline\",\n        disabled: false,\n        click: \"create\"\n      }, {\n        type: \"primary\",\n        title: \"修改\",\n        icon: \"el-icon-edit\",\n        disabled: false,\n        click: \"update\"\n      }, {\n        type: \"primary\",\n        title: \"删除\",\n        icon: \"el-icon-delete\",\n        disabled: false,\n        click: \"delete\"\n      }],\n      //分页\n      pagination: {\n        currentPage: 1,\n        position: 'center',\n        pageSizes: [10, 50, 100],\n        //默认每页显示多少条\n        layout: 'sizes ,prev, pager, next, jumper'\n      },\n      //表单字段\n      columns: [{\n        label: '先导区名称',\n        prop: 'pilotAreaName',\n        template: true\n      }, {\n        label: '先导区级别',\n        prop: 'pilotLevelName'\n      }, {\n        label: '所在省份',\n        prop: 'provinceName'\n      }, {\n        label: '发布人',\n        prop: 'createUserName'\n      }, {\n        label: '批准机关',\n        prop: 'approvalOrg'\n      }, {\n        label: '发布时间',\n        prop: 'createTime',\n        formatter: function formatter(row) {\n          return new Date(row.createTime).Format(\"yyyy-MM-dd hh:mm:ss\");\n        }\n      }],\n      //调用组件传输返回页面数据\n      getDataWay: {\n        dataType: \"url\",\n        data: this.$api.xdqglApi.pilotAreaQuery,\n        param: {}\n      },\n      controlTime1: {}\n    };\n  },\n  methods: {\n    initData: function initData() {\n      var that = this; // 请求省份码表\n\n      this.$$request({\n        method: 'post',\n        url: that.$api.getCodeData,\n        data: {\n          tableName: \"DM_PROVINCE\"\n        }\n      }).then(function (res) {\n        if (res.result === 1) {\n          that.provinces = res.info; // that.$refs.createbar.provinces = res.info\n        } else {\n          that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\n          return false;\n        }\n      }).catch(function (error) {\n        that.$alert(error, \"系统异常，请联系管理员111！\", {});\n        return false;\n      }); // 请求先导区级别码表\n\n      this.$$request({\n        method: 'post',\n        url: that.$api.getCodeData,\n        data: {\n          tableName: \"DM_PILOT_LEVEL\"\n        }\n      }).then(function (res) {\n        if (res.result === 1) {\n          that.pilotLevels = res.info; // that.$refs.createbar.pilotLevels = res.info\n        } else {\n          that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\n          return false;\n        }\n      }).catch(function (error) {\n        that.$alert(error, \"系统异常，请联系管理员333！\", {});\n        return false;\n      });\n    },\n    //点击工具栏跳转\n    toolbarClick: function toolbarClick(item, event) {\n      var _this = this;\n\n      var that = this;\n\n      if (item.title == '新建') {\n        /*新建初始化*/\n        that.createDialogVisible = true; // that.$refs.createbar.createDialogVisible = true\n\n        that.$nextTick(function () {\n          that.$refs.createbar.init();\n        });\n      }\n\n      if (item.title == '修改') {\n        /*修改初始化*/\n        if (this.checkedData.length === 0 || this.checkedData.length > 1) {\n          this.$alert('请选择一条数据进行修改！', '提示', {\n            type: 'warning'\n          });\n        } else if (this.checkedData.editFlag === 0) {\n          this.$alert('当前登录人不具有修改权限！', '提示', {\n            type: 'warning'\n          });\n        } else {\n          if (this.checkedData[0].state > 0) {\n            this.$alert('审核中或已发布的无法修改！', '提示', {\n              type: 'warning'\n            });\n            return false;\n          }\n\n          that.createDialogVisible = true; // that.$refs.createbar.createDialogVisible = true\n\n          that.$nextTick(function () {\n            that.$refs.createbar.init(_this.checkedData[0].uuid);\n            that.$refs.createbar.$forceUpdate();\n          });\n        }\n      }\n\n      if (item.title == '删除') {\n        /*that.dialogVisible = true\n        that.$nextTick(() => {\n            that.$refs.delFunc.delete()\n        })*/\n        if (this.checkedData == '') {\n          this.$alert('请选择至少一条数据进行删除！', '提示', {\n            type: 'warning'\n          });\n        } else {\n          for (var i = 0; i < this.checkedData.length; i++) {\n            if (this.checkedData[i].state > 0) {\n              this.$alert('审核中或已发布的无法删除！', '提示', {\n                type: 'warning'\n              });\n              return false;\n            }\n\n            if (this.checkedData.editFlag === 0) {\n              this.$alert('当前登录人不具有修改权限！', '提示', {\n                type: 'warning'\n              });\n              return false;\n            }\n          }\n\n          var ids = '';\n          this.checkedData.forEach(function (item, index) {\n            ids += item.uuid + ',';\n\n            if (index == _this.checkedData.length - 1) {\n              ids = ids.substr(0, ids.length - 1);\n            }\n          });\n          that.$confirm('确认删除?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            _this.$$request({\n              method: 'post',\n              url: _this.$api.xdqglApi.pilotAreaDelete,\n              data: {\n                uuid: ids\n              }\n            }).then(function (res) {\n              if (res.result === 1) {\n                that.$message({\n                  message: res.msg,\n                  type: 'success'\n                });\n                that.xdqxxtbForm = res.info;\n                that.$refs.table.loadData();\n                that.checkedData = [];\n              } else {\n                that.$message({\n                  type: 'warning',\n                  message: '删除失败!'\n                });\n                return false;\n              }\n            }).catch(function (error) {\n              that.$message({\n                type: 'info',\n                message: '删除失败!'\n              });\n              return false;\n            });\n          });\n        }\n      }\n\n      if (item.title == '搜索') {\n        // window.console.log(...this.searchParams)\n        that.loadData(that.searchParams);\n      }\n    },\n    loadData: function loadData(searchParams) {\n      this.$refs.table.loadData(searchParams);\n      this.checkedData = [];\n    },\n    displayDialog: function displayDialog(showOrHide) {\n      this.createDialogVisible = showOrHide;\n    },\n    //点击标题跳转页面方法\n    selectXdq: function selectXdq(data) {\n      this.$router.push({\n        name: \"xdqDetail\",\n        query: {\n          uuid: data.uuid,\n          moduleCode: 'xdq',\n          readOnly: '2'\n        }\n      });\n    },\n\n    /*//查询\n    searchBtn() {\n        const that = this;\n        let param = {\n            pilotAreaName: that.searchParams.pilotAreaName,\n        }\n        that.$set(that.getDataWay.params = param);\n        that.$refs.table.loadData(param);\n    },\n    },*/\n    //查询---防抖函数，限制后台访问频率\n    searchBtn: _.debounce(function () {\n      var that = this;\n\n      if (this.searchParams.pilotAreaName.indexOf('?') === -1) {\n        this.searchTip = '';\n      }\n\n      var param = {\n        pilotAreaName: that.searchParams.pilotAreaName\n      };\n      that.$set(that.getDataWay.params = param);\n      that.$refs.table.loadData(param);\n    }, 500)\n  },\n  watch: {\n    'searchParams.title': {\n      handler: function handler(newParams, oldParams) {\n        this.searchTip = '正在输入...';\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  mounted: function mounted() {\n    this.initData();\n  },\n  created: function created() {\n    this.searchTip = ''; //首次进入清除提示\n  }\n};",{"version":3,"sources":["xdqxxtb.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"rightMain\">\r\n        <!--工具栏-->\r\n        <toolbar position=top :toolbarItem=\"toolbarItem\" @toolbarClick=\"toolbarClick\" center></toolbar>\r\n        <!--工具栏-新建-->\r\n        <createbar v-if=\"createDialogVisible\" ref=\"createbar\" @loadData=\"loadData\"></createbar>\r\n        <screenFilter :searchParams=\"searchParams\">\r\n            <template slot=\"slot_two\">\r\n                <span style=\"font-size:8px;margin-right:14px;color: #B2B7B7;\">{{searchTip}}</span>\r\n                <el-input class=\"search-name\" size=\"small\" v-model=\"searchParams.pilotAreaName\"\r\n                          placeholder=\"请输入先导区名称\" prefix-icon=\"el-icon-search\" @input=\"searchBtn\">\r\n                </el-input>\r\n            </template>\r\n            <template slot=\"slot_search\">\r\n                <el-form-item label=\"所在省份\">\r\n                    <el-select v-model=\"searchParams.provinceDm\" placeholder=\"请选择\">\r\n                        <el-option\r\n                                v-for=\"item in provinces\"\r\n                                :key=\"item.CODE\"\r\n                                :label=\"item.CAPTION\"\r\n                                :value=\"item.CODE\">\r\n                        </el-option>\r\n                    </el-select>\r\n<!--                    <el-input v-model=\"searchParams.provinceDm\"></el-input>-->\r\n                </el-form-item>\r\n                <el-form-item label=\"先导区级别\">\r\n                    <el-select v-model=\"searchParams.pilotLevelDm\" placeholder=\"请选择\">\r\n                        <el-option\r\n                                v-for=\"item in pilotLevels\"\r\n                                :key=\"item.CODE\"\r\n                                :label=\"item.CAPTION\"\r\n                                :value=\"item.CODE\">\r\n                        </el-option>\r\n                    </el-select>\r\n<!--                    <el-input v-model=\"searchParams.pilotLevelDm\"></el-input>-->\r\n                </el-form-item>\r\n<!--                <el-form-item label=\"日期\">-->\r\n<!--                    <el-date-picker-->\r\n<!--                        prefix-icon=\"el-icon-date\"-->\r\n<!--                        v-model=\"searchParams.startDate\"-->\r\n<!--                        type=\"date\"-->\r\n<!--                        :clearable=\"false\"-->\r\n<!--                        class=\"date-picker-155\"-->\r\n<!--                        placeholder=\"选择起始日期\"-->\r\n<!--                        value-format=\"yyyy-MM-dd\">-->\r\n<!--                    </el-date-picker>-->\r\n<!--                    <span class=\"range\">至</span>-->\r\n<!--                    <el-date-picker-->\r\n<!--                        prefix-icon=\"el-icon-date\"-->\r\n<!--                        v-model=\"searchParams.endDate\"-->\r\n<!--                        type=\"date\"-->\r\n<!--                        :clearable=\"false\"-->\r\n<!--                        class=\"date-picker-155\"-->\r\n<!--                        placeholder=\"选择结束日期\"-->\r\n<!--                        value-format=\"yyyy-MM-dd\"-->\r\n<!--                        :picker-options=\"controlTime1\">-->\r\n<!--                    </el-date-picker>-->\r\n<!--                </el-form-item>-->\r\n            </template>\r\n        </screenFilter>\r\n        <tableList ref=\"table\"\r\n           selection\r\n           index\r\n           style=\"border-top: none;text-align: center\"\r\n           :getDataWay=\"getDataWay\"\r\n           :columns=\"columns\"\r\n           :pagination = \"pagination\"\r\n           :checkedData.sync='checkedData'>\r\n            <el-table-column label=\"先导区名称\" slot=\"pilotAreaName\" show-overflow-tooltip>\r\n                <template slot-scope=\"scope\">\r\n                    <el-link :underline=\"false\" @click=\"selectXdq(scope.row)\" class=\"a-link\">\r\n                        {{scope.row.pilotAreaName}}\r\n                    </el-link>\r\n                </template>\r\n            </el-table-column>\r\n        </tableList>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TableList from \"../../components/grid/TableList\";\r\n    import toolbar from \"@/components/toolbar/myToolbar\";\r\n    import createbar from \"@/views/xdqgl/myToolbar/xdqxxtbCreOperation\";\r\n    import _ from 'lodash'\r\n\r\n    export default {\r\n        name: \"xdqxxtb\",\r\n        components: {\r\n            TableList,\r\n            toolbar,\r\n            createbar\r\n        },\r\n        data() {\r\n            return {\r\n                searchTip: '',\r\n                // 字典表数据\r\n                provinces: [],\r\n                pilotLevels: [],\r\n                //查询时需获取页面数据\r\n                searchParams:{\r\n                    pilotAreaName:'',\r\n                    pilotLevelDm:'',\r\n                    provinceDm:'',\r\n                    startDate:'',\r\n                    endDate:''\r\n                },\r\n                createDialogVisible: false,\r\n                checkedData: [], //全选框\r\n                //工具栏\r\n                toolbarItem:[\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"新建\",\r\n                        icon:\"el-icon-edit-outline\",\r\n                        disabled:false,\r\n                        click:\"create\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"修改\",\r\n                        icon:\"el-icon-edit\",\r\n                        disabled:false,\r\n                        click:\"update\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"删除\",\r\n                        icon:\"el-icon-delete\",\r\n                        disabled:false,\r\n                        click:\"delete\"\r\n                    },\r\n                    /*{\r\n                        type:\"primary\",\r\n                        title:\"搜索\",\r\n                        icon:\"el-icon-search\",\r\n                        disabled:false,\r\n                        click:\"search\"\r\n                    },*/\r\n                ],\r\n                //分页\r\n                pagination: {\r\n                    currentPage: 1,\r\n                    position: 'center',\r\n                    pageSizes: [10, 50, 100],//默认每页显示多少条\r\n                    layout: 'sizes ,prev, pager, next, jumper'\r\n                },\r\n                //表单字段\r\n                columns: [\r\n                    {\r\n                        label: '先导区名称',\r\n                        prop: 'pilotAreaName',\r\n                        template: true\r\n                    },{\r\n                        label: '先导区级别',\r\n                        prop: 'pilotLevelName'\r\n                    },{\r\n                        label: '所在省份',\r\n                        prop: 'provinceName'\r\n                    },{\r\n                        label: '发布人',\r\n                        prop: 'createUserName'\r\n                    },{\r\n                        label: '批准机关',\r\n                        prop: 'approvalOrg'\r\n                    },{\r\n                        label: '发布时间',\r\n                        prop: 'createTime',\r\n                        formatter(row) {\r\n                            return new Date(row.createTime).Format(\"yyyy-MM-dd hh:mm:ss\")\r\n                        },\r\n                    }\r\n                ],\r\n                //调用组件传输返回页面数据\r\n                getDataWay:{\r\n                    dataType:\"url\",\r\n                    data: this.$api.xdqglApi.pilotAreaQuery,\r\n                    param: {}\r\n                },\r\n                controlTime1: {\r\n\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            initData() {\r\n                const that = this\r\n                // 请求省份码表\r\n                this.$$request({\r\n                    method: 'post',\r\n                    url: that.$api.getCodeData,\r\n                    data: {\r\n                        tableName : \"DM_PROVINCE\"\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        that.provinces = res.info\r\n                        // that.$refs.createbar.provinces = res.info\r\n                    }else {\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {})\r\n                        return false\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员111！\", {})\r\n                    return false\r\n                })\r\n                // 请求先导区级别码表\r\n                this.$$request({\r\n                    method: 'post',\r\n                    url: that.$api.getCodeData,\r\n                    data: {\r\n                        tableName : \"DM_PILOT_LEVEL\"\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        that.pilotLevels = res.info\r\n                        // that.$refs.createbar.pilotLevels = res.info\r\n                    }else {\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {})\r\n                        return false\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员333！\", {})\r\n                    return false\r\n                })\r\n            },\r\n            //点击工具栏跳转\r\n            toolbarClick(item,event) {\r\n                const that = this;\r\n                if (item.title == '新建') {\r\n                    /*新建初始化*/\r\n                    that.createDialogVisible = true\r\n                    // that.$refs.createbar.createDialogVisible = true\r\n                    that.$nextTick(() => {\r\n                        that.$refs.createbar.init()\r\n                    })\r\n                }\r\n                if(item.title == '修改'){\r\n                    /*修改初始化*/\r\n                    if(this.checkedData.length === 0 || this.checkedData.length > 1){\r\n                        this.$alert('请选择一条数据进行修改！', '提示',{\r\n                            type: 'warning'\r\n                        })\r\n                    }else if(this.checkedData.editFlag===0){\r\n                        this.$alert('当前登录人不具有修改权限！', '提示', {\r\n                            type: 'warning'\r\n                        })\r\n                    }else{\r\n                        if (this.checkedData[0].state > 0) {\r\n                            this.$alert('审核中或已发布的无法修改！', '提示',{\r\n                                type: 'warning'\r\n                            })\r\n                            return false\r\n                        }\r\n\r\n                        that.createDialogVisible = true\r\n                        // that.$refs.createbar.createDialogVisible = true\r\n                        that.$nextTick(() => {\r\n                            that.$refs.createbar.init(this.checkedData[0].uuid)\r\n                            that.$refs.createbar.$forceUpdate()\r\n                        })\r\n                    }\r\n                }\r\n                if(item.title=='删除'){\r\n                    /*that.dialogVisible = true\r\n                    that.$nextTick(() => {\r\n                        that.$refs.delFunc.delete()\r\n                    })*/\r\n                    if(this.checkedData == ''){\r\n                        this.$alert('请选择至少一条数据进行删除！', '提示',{\r\n                            type: 'warning'\r\n                        })\r\n                    }else {\r\n                        for (let i=0; i<this.checkedData.length; i++) {\r\n                            if (this.checkedData[i].state > 0) {\r\n                                this.$alert('审核中或已发布的无法删除！', '提示',{\r\n                                    type: 'warning'\r\n                                })\r\n                                return false\r\n                            }\r\n                            if(this.checkedData.editFlag===0){\r\n                                this.$alert('当前登录人不具有修改权限！', '提示', {\r\n                                    type: 'warning'\r\n                                })\r\n                                return false\r\n                            }\r\n                        }\r\n\r\n                        let ids = ''\r\n                        this.checkedData.forEach((item, index)=>{\r\n                            ids += item.uuid + ','\r\n                            if (index == this.checkedData.length-1) {\r\n                                ids = ids.substr(0,ids.length - 1)\r\n                            }\r\n                        })\r\n                        that.$confirm('确认删除?', '提示', {\r\n                            confirmButtonText: '确定',\r\n                            cancelButtonText: '取消',\r\n                            type: 'warning'\r\n                        }).then(() => {\r\n                            this.$$request({\r\n                                method: 'post',\r\n                                url: this.$api.xdqglApi.pilotAreaDelete,\r\n                                data: {\r\n                                    uuid: ids\r\n                                }\r\n                            }).then(function (res) {\r\n                                if (res.result === 1) {\r\n                                    that.$message({\r\n                                        message: res.msg,\r\n                                        type: 'success'\r\n                                    })\r\n                                    that.xdqxxtbForm = res.info\r\n                                    that.$refs.table.loadData()\r\n                                    that.checkedData = []\r\n                                } else {\r\n                                    that.$message({\r\n                                        type: 'warning',\r\n                                        message: '删除失败!'\r\n                                    });\r\n                                    return false\r\n                                }\r\n                            }).catch(function (error) {\r\n                                that.$message({\r\n                                    type: 'info',\r\n                                    message: '删除失败!'\r\n                                })\r\n                                return false\r\n                            })\r\n                        })\r\n                    }\r\n                }\r\n                if(item.title=='搜索'){\r\n                    // window.console.log(...this.searchParams)\r\n                    that.loadData(that.searchParams)\r\n                }\r\n            },\r\n            loadData(searchParams) {\r\n                this.$refs.table.loadData(searchParams)\r\n                this.checkedData = []\r\n            },\r\n            displayDialog(showOrHide) {\r\n                this.createDialogVisible = showOrHide\r\n            },\r\n            //点击标题跳转页面方法\r\n            selectXdq(data) {\r\n                this.$router.push({\r\n                    name: \"xdqDetail\",\r\n                    query: {\r\n                        uuid: data.uuid,\r\n                        moduleCode: 'xdq',\r\n                        readOnly:'2'\r\n                    }\r\n                })\r\n            },\r\n            /*//查询\r\n            searchBtn() {\r\n                const that = this;\r\n                let param = {\r\n                    pilotAreaName: that.searchParams.pilotAreaName,\r\n                }\r\n                that.$set(that.getDataWay.params = param);\r\n                that.$refs.table.loadData(param);\r\n            },\r\n        },*/\r\n            //查询---防抖函数，限制后台访问频率\r\n            searchBtn: _.debounce(function () {\r\n                const that = this;\r\n                if (this.searchParams.pilotAreaName.indexOf('?') === -1) {\r\n                    this.searchTip = ''\r\n                }\r\n                let param = {\r\n                    pilotAreaName: that.searchParams.pilotAreaName,\r\n                }\r\n                that.$set(that.getDataWay.params = param);\r\n                that.$refs.table.loadData(param);\r\n            }, 500),\r\n        },\r\n        watch: {\r\n            'searchParams.title': {\r\n                handler(newParams, oldParams) {\r\n                    this.searchTip = '正在输入...'\r\n                },\r\n                deep: true,\r\n                immediate: true\r\n            },\r\n        },\r\n        mounted() {\r\n            this.initData()\r\n        },\r\n        created(){\r\n            this.searchTip = '' //首次进入清除提示\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .rightMain {\r\n        margin: 10px auto;\r\n        width: 93%;\r\n        /*margin-right: 90px;\r\n        align:0 auto;\r\n        padding-left: 10px;\r\n        padding-top: 20px;\r\n        min-width: 150px;*/\r\n    }\r\n\r\n    /deep/ div.screenFilter {\r\n        overflow-y: hidden;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views/xdqgl"}]}