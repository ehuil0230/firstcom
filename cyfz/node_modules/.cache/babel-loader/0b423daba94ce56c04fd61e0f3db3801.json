{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js!D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\gzzlgl\\Instructions.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\gzzlgl\\Instructions.vue","mtime":1571637100574},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport tableList from '@/components/grid/TableList.vue';\nimport zlDialog from \"./zlDialog\";\nexport default {\n  name: \"sendInstructions\",\n  components: {\n    zlDialog: zlDialog,\n    tableList: tableList\n  },\n  data: function data() {\n    return {\n      showTip: true,\n      uploadVisible: false,\n      relatedId: '',\n      reciverList: [],\n      //新建弹出框\n      dialogFormVisible: false,\n      form: {\n        //站内信代码\n        MailDm: '002',\n        //接收人ID\n        recievers: [],\n        //接收人姓名\n        recieverNames: '',\n        //接收标题\n        title: '',\n        //接收内容\n        content: '',\n        uuid: '',\n        type: 0\n      },\n      //搜索框中的数据\n      searchParams: {\n        //标题\n        title: '',\n        //发送人\n        user: ''\n      },\n      //数据接收\n      getDataWay: {\n        dataType: \"url\",\n        type: 'post',\n        data: this.$api.hyglApi.querySendMeMail,\n        param: {} //data: '/MailDetailCtrl/querySendMeMailDetail',\n\n      },\n      // 通过url方式\n      //分页\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        position: 'right',\n        layout: 'total,prev, pager, next, jumper'\n      },\n      //tablelist表单的列名\n      columns: [{\n        label: '读否',\n        prop: 'icon',\n        template: true,\n        width: '10%'\n      }, {\n        label: '发送人',\n        prop: 'senderName',\n        width: '15%'\n      }, {\n        label: '标题',\n        prop: 'title',\n        template: true\n      }, {\n        label: '发送部门',\n        prop: 'sendOrgName',\n        width: '15%'\n      }, {\n        label: '发送时间',\n        prop: 'createTime',\n        width: '20%'\n      }]\n    };\n  },\n  methods: {\n    afterNew: function afterNew(obj) {\n      this.form = {\n        //站内信代码\n        MailDm: '002',\n        //接收人ID\n        recievers: [],\n        //接收人姓名\n        recieverNames: '',\n        //接收标题\n        title: '',\n        //接收内容\n        content: '',\n        //传入uuid以此区分新建还是修改\n        uuid: ''\n      };\n      this.$refs.table.loadData();\n    },\n    reload: function reload() {\n      this.$refs.table.loadData();\n    },\n    search: function search() {\n      /*  let that = this\n      let params={\n           title:this.searchParams.title,\n           user:this.searchParams.user\n       }\n       this.$refs.table.loadData(params);*/\n\n      /*this.$axios({\n          method: 'post',\n          url: this.$api.hyglApi.querySendMeMail,\n          data: {\n              title:this.searchParams.title,\n              sender:this.searchParams.user\n          }\n      }).then(function (res) {\n          that.$refs.table.loadData();\n      })*/\n      this.$set(this.getDataWay.param, 'title', this.searchParams.title);\n      this.$refs.table.loadData();\n    },\n    closeDialogFunc: function closeDialogFunc() {\n      this.dialogFormVisible = false;\n      this.relatedid = 'init';\n    },\n\n    /* //新建工作指令\n     submitForm(formName) {\n         let that = this;\n         let tempArr = [];\n         for (let item of that.form.recievers) {\n             for (let temp of that.reciverList) {\n                 if (item === temp.uuid) {\n                     tempArr.push(temp.realName);\n                 }\n             }\n         }\n         if (tempArr.length >= 2) {\n             that.form.recieverNames = tempArr.join(\",\");\n             that.form.recieverNames += \"...\"\n         } else {\n             that.form.recieverNames = tempArr.join(\",\");\n         }\n         this.$refs[formName].validate((valid) => {\n             if (valid) {\n                 //添加接口\n                 that.form.recievers = that.form.recievers.join(\",\");\n                 let req = that.form;\n                 this.$axios({\n                     method: 'post',\n                     url: this.$api.hyglApi.saveMail,\n                     data: req\n                 }).then(function (res) {\n                     console.log(res)\n                     if (res.result === 1) {\n                         let fileList = that.$refs.upload.fileList;\n                         if (fileList.length > 0) {\n                             /!*保存成功，关联附件列表*!/\n                             console.log(that.$refs.upload.fileList);\n                             let MD5Paths = [], fileNames = [];\n                             fileList.forEach((item) => {\n                                 MD5Paths.push(item.url);\n                                 fileNames.push(item.name);\n                             })\n                             let param = {\n                                 \"relatedid\": res.info.uuid,\n                                 \"MD5Path\": MD5Paths.join(','),\n                                 \"fileName\": fileNames.join(',')\n                             }\n                             that.$$insertFileInfoBatch(param).then((resdata) => {\n                                 that.$message({\n                                     message: '新增成功',\n                                     type: 'success'\n                                 });\n                                 that.dialogFormVisible = false;\n                             }).catch(function (err) {\n                                 that.$message({\n                                     message: '关联附件列表失败',\n                                     type: 'warning'\n                                 });\n                                 that.dialogFormVisible = false;\n                             })\n                         } else {\n                             that.$message({\n                                 message: '新增成功',\n                                 type: 'success'\n                             });\n                             that.dialogFormVisible = false;\n                         }\n                     }\n                 })\n             } else {\n                 console.log('error submit!!');\n                 return false;\n             }\n         });\n     },*/\n    //点击标题弹出详情框\n    selectGg: function selectGg(data) {\n      this.dialogFormVisible = true;\n      this.form.uuid = data.uuid;\n      this.form.recieverNames = data.senderName;\n      this.form.title = data.title;\n      this.form.content = data.content;\n      this.form.type = 1;\n    }\n  },\n  created: function created() {\n    var that = this;\n    this.$$request({\n      url: this.$api.homeApi.getLoginUserList,\n      data: {}\n    }).then(function (res) {\n      that.reciverList = res.info;\n    });\n  }\n};",{"version":3,"sources":["Instructions.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div style=\"margin: 20px\">\r\n            <div style=\"display: inline-block;margin-bottom: 20px\">\r\n                <el-button @click=\"dialogFormVisible=true\" size=\"small\" type=\"primary\">新建</el-button>\r\n                <el-button size=\"small\" style=\"margin-left: 10px\" type=\"primary\" @click=\"reload\">刷新</el-button>\r\n            </div>\r\n            <div  style=\"display: inline-block;float: right;\">\r\n                    <el-input size=\"small\" v-model=\"searchParams.title\" placeholder=\"请输入标题名称\"\r\n                              prefix-icon=\"el-icon-search\" @input=\"search\">\r\n                    </el-input>\r\n            </div>\r\n\r\n        <!--指令添加弹出框-->\r\n        <!--<el-dialog\r\n                :close-on-click-modal=\"false\"\r\n                :visible.sync=\"dialogFormVisible\"\r\n                title=\"新建指令\"\r\n                v-dialogDrag\r\n                width=\"1050px\"\r\n                @close=\"formClose\"\r\n                :destroy-on-close=\"true\"\r\n        >\r\n            <div style=\"width:100%;\">\r\n                <el-form :inline=\"true\" :model=\"form\" :rules=\"rules\" label-width=\"120px\" ref=\"form\" size=\"medium\">\r\n                    <el-form-item label=\"接收人\" prop=\"recievers\">\r\n                       <el-select v-model=\"form.recievers\" multiple placeholder=\"请选择\" :disabled=\"uploadVisible\">\r\n                            <el-option\r\n                                    v-for=\"item in reciverList\"\r\n                                    :key=\"item.uuid\"\r\n                                    :label=\"item.realName\"\r\n                                    :value=\"item.uuid\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"指令标题\" prop=\"title\">\r\n                        <el-input :disabled=\"uploadVisible\" class=\"rc\" type=\"text\" v-model=\"form.title\" maxlength=\"30\"\r\n                                  show-word-limit></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"指令内容\" prop=\"content\">\r\n                        <el-input :disabled=\"uploadVisible\" :rows=\"5\" class=\"rc\" type=\"textarea\" v-model=\"form.content\"\r\n                                  maxlength=\"1000\"\r\n                                  show-word-limit></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"附件\" prop=\"cyUpload\">\r\n                        <cyUpload ref=\"upload\" :file-num=\"fileNum\" :auto-up=\"true\"></cyUpload>\r\n                    </el-form-item>\r\n                    <el-form-item style=\"width: 100%;text-align: center\">\r\n                        <el-button v-if=\"showTip\" @click=\"submitForm('form')\" size=\"medium \" type=\"primary\">保存</el-button>\r\n                        <el-button @click=\"dialogFormVisible = false\" size=\"medium \">取消</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-dialog>-->\r\n        <tableList :columns=\"columns\"\r\n                   :getDataWay=\"getDataWay\"\r\n                   :pagination=\"pagination\"\r\n                   ref=\"table\"\r\n                   index\r\n        >\r\n<!--            <el-table-column label=\"\" slot=\"icon\" width=\"35px\">-->\r\n            <el-table-column label=\"\" slot=\"icon\" width=\"44px\">\r\n                <template slot-scope=\"scope\">\r\n                    <!--<el-button type=\"info\" icon=\"el-icon-message\" circle v-if=\"scope.row.state==0\" size=\"mini\"></el-button>\r\n                    <el-button type=\"success\" icon=\"el-icon-check\" circle v-else size=\"mini\" style=\"background-color: #3a8ee6\"></el-button>-->\r\n                    <!-- Example of  Example of envelope-o Example of envelope-open Example of envelope-open-o-->\r\n                    <i class=\"fa fa-envelope-o\" style=\"font-size: 20px\" v-if=\"scope.row.state==0\"></i>\r\n                    <i class=\"fa fa-envelope-open-o\" style=\"font-size: 20px\" v-else></i>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"标题\" slot=\"title\" show-overflow-tooltip>\r\n                <template slot-scope=\"scope\">\r\n                    <el-link :underline=\"false\" @click.stop=\"selectGg(scope.row)\" class=\"a-link\">\r\n                        {{scope.row.title}}\r\n                    </el-link>\r\n                </template>\r\n            </el-table-column>\r\n        </tableList>\r\n        <!--指令详情弹出框-->\r\n       <!-- <el-dialog\r\n                :close-on-click-modal=\"false\"\r\n                :visible.sync=\"dialogFormVisibleInfo\"\r\n                title=\"指令详情\"\r\n                v-dialogDrag\r\n                width=\"1050px\"\r\n        >\r\n            <div style=\"width:100%;\">\r\n                <el-form :inline=\"true\" :model=\"formInfo\" :rules=\"rules\" label-width=\"120px\" ref=\"form\" size=\"medium\">\r\n                    <el-form-item label=\"发送人\" prop=\"senderName\">\r\n                        <el-input :disabled=\"true\" class=\"rc\" type=\"name\" v-model=\"formInfo.senderName\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"指令标题\" prop=\"title\">\r\n                        <el-input :disabled=\"true\" class=\"rc\" type=\"text\" v-model=\"formInfo.title\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"指令内容\" prop=\"content\">\r\n                        <el-input :disabled=\"true\" :rows=\"10\" class=\"rc\" type=\"textarea\"\r\n                                  v-model=\"formInfo.content\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"附件\">\r\n                        <p class=\"fj_list\" v-for=\"item in fileList\" @click=\"downl(item)\"><i class=\"el-icon-tickets\"></i>{{item.name}}\r\n                        </p>\r\n                    </el-form-item>\r\n                    <el-form-item style=\"width: 100%;text-align: center\">\r\n                        <el-button @click=\"dialogFormVisibleInfo = false\" size=\"medium \">关闭</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-dialog>-->\r\n        <zl-dialog v-if=\"dialogFormVisible\" :dialogFormVisible.sync=\"dialogFormVisible\" :form=\"form\" @afterNew=\"afterNew\"></zl-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import tableList from '@/components/grid/TableList.vue';\r\n    import zlDialog from \"./zlDialog\";\r\n\r\n\r\n    export default {\r\n        name: \"sendInstructions\",\r\n        components: {\r\n            zlDialog,\r\n            tableList\r\n        },\r\n        data() {\r\n            return {\r\n                showTip: true,\r\n                uploadVisible: false,\r\n                relatedId: '',\r\n                reciverList: [],\r\n                //新建弹出框\r\n                dialogFormVisible: false,\r\n                form: {\r\n                    //站内信代码\r\n                    MailDm: '002',\r\n                    //接收人ID\r\n                    recievers: [],\r\n                    //接收人姓名\r\n                    recieverNames: '',\r\n                    //接收标题\r\n                    title: '',\r\n                    //接收内容\r\n                    content: '',\r\n                    uuid:'',\r\n                    type:0\r\n                },\r\n                //搜索框中的数据\r\n                searchParams: {\r\n                    //标题\r\n                    title: '',\r\n                    //发送人\r\n                    user: ''\r\n                },\r\n                //数据接收\r\n                getDataWay: {\r\n                    dataType: \"url\",\r\n                    type: 'post',\r\n                    data: this.$api.hyglApi.querySendMeMail,\r\n                    param:{}\r\n                    //data: '/MailDetailCtrl/querySendMeMailDetail',\r\n                }, // 通过url方式\r\n                //分页\r\n                pagination: {\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                    position: 'right',\r\n                    layout: 'total,prev, pager, next, jumper'\r\n                },\r\n                //tablelist表单的列名\r\n                columns: [\r\n                    {\r\n                        label: '读否',\r\n                        prop: 'icon',\r\n                        template:true,\r\n                        width: '10%',\r\n                    },\r\n                    {\r\n                        label: '发送人',\r\n                        prop: 'senderName',\r\n                        width: '15%',\r\n                    },\r\n                    {\r\n                        label: '标题',\r\n                        prop: 'title',\r\n                        template: true\r\n                    },\r\n                    {\r\n                        label: '发送部门',\r\n                        prop: 'sendOrgName',\r\n                        width: '15%',\r\n                    },\r\n                    {\r\n                        label: '发送时间',\r\n                        prop: 'createTime',\r\n                        width: '20%',\r\n                    },\r\n                ],\r\n            }\r\n        },\r\n        methods: {\r\n            afterNew(obj){\r\n                this.form = {\r\n                    //站内信代码\r\n                    MailDm: '002',\r\n                    //接收人ID\r\n                    recievers: [],\r\n                    //接收人姓名\r\n                    recieverNames: '',\r\n                    //接收标题\r\n                    title: '',\r\n                    //接收内容\r\n                    content: '',\r\n                    //传入uuid以此区分新建还是修改\r\n                    uuid:''\r\n                }\r\n                this.$refs.table.loadData();\r\n            },\r\n            reload(){\r\n                this.$refs.table.loadData();\r\n            },\r\n            search(){\r\n               /*  let that = this\r\n               let params={\r\n                    title:this.searchParams.title,\r\n                    user:this.searchParams.user\r\n                }\r\n                this.$refs.table.loadData(params);*/\r\n                /*this.$axios({\r\n                    method: 'post',\r\n                    url: this.$api.hyglApi.querySendMeMail,\r\n                    data: {\r\n                        title:this.searchParams.title,\r\n                        sender:this.searchParams.user\r\n                    }\r\n                }).then(function (res) {\r\n                    that.$refs.table.loadData();\r\n                })*/\r\n                this.$set(this.getDataWay.param,'title',this.searchParams.title);\r\n                this.$refs.table.loadData()\r\n\r\n            },\r\n\r\n            closeDialogFunc() {\r\n                this.dialogFormVisible = false;\r\n                this.relatedid = 'init'\r\n            },\r\n           /* //新建工作指令\r\n            submitForm(formName) {\r\n                let that = this;\r\n                let tempArr = [];\r\n                for (let item of that.form.recievers) {\r\n                    for (let temp of that.reciverList) {\r\n                        if (item === temp.uuid) {\r\n                            tempArr.push(temp.realName);\r\n                        }\r\n                    }\r\n                }\r\n                if (tempArr.length >= 2) {\r\n                    that.form.recieverNames = tempArr.join(\",\");\r\n                    that.form.recieverNames += \"...\"\r\n                } else {\r\n                    that.form.recieverNames = tempArr.join(\",\");\r\n                }\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        //添加接口\r\n                        that.form.recievers = that.form.recievers.join(\",\");\r\n                        let req = that.form;\r\n                        this.$axios({\r\n                            method: 'post',\r\n                            url: this.$api.hyglApi.saveMail,\r\n                            data: req\r\n                        }).then(function (res) {\r\n                            console.log(res)\r\n                            if (res.result === 1) {\r\n                                let fileList = that.$refs.upload.fileList;\r\n                                if (fileList.length > 0) {\r\n                                    /!*保存成功，关联附件列表*!/\r\n                                    console.log(that.$refs.upload.fileList);\r\n                                    let MD5Paths = [], fileNames = [];\r\n                                    fileList.forEach((item) => {\r\n                                        MD5Paths.push(item.url);\r\n                                        fileNames.push(item.name);\r\n                                    })\r\n                                    let param = {\r\n                                        \"relatedid\": res.info.uuid,\r\n                                        \"MD5Path\": MD5Paths.join(','),\r\n                                        \"fileName\": fileNames.join(',')\r\n                                    }\r\n                                    that.$$insertFileInfoBatch(param).then((resdata) => {\r\n                                        that.$message({\r\n                                            message: '新增成功',\r\n                                            type: 'success'\r\n                                        });\r\n                                        that.dialogFormVisible = false;\r\n                                    }).catch(function (err) {\r\n                                        that.$message({\r\n                                            message: '关联附件列表失败',\r\n                                            type: 'warning'\r\n                                        });\r\n                                        that.dialogFormVisible = false;\r\n                                    })\r\n                                } else {\r\n                                    that.$message({\r\n                                        message: '新增成功',\r\n                                        type: 'success'\r\n                                    });\r\n                                    that.dialogFormVisible = false;\r\n                                }\r\n                            }\r\n                        })\r\n                    } else {\r\n                        console.log('error submit!!');\r\n                        return false;\r\n                    }\r\n                });\r\n            },*/\r\n            //点击标题弹出详情框\r\n            selectGg(data) {\r\n                this.dialogFormVisible = true;\r\n                this.form.uuid = data.uuid;\r\n                this.form.recieverNames = data.senderName;\r\n                this.form.title = data.title;\r\n                this.form.content = data.content;\r\n                this.form.type = 1;\r\n\r\n            },\r\n        },\r\n        created() {\r\n\r\n            var that = this\r\n            this.$$request({\r\n                url: this.$api.homeApi.getLoginUserList,\r\n                data: {}\r\n            }).then(function (res) {\r\n                that.reciverList = res.info;\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .move-right {\r\n        margin-right: -200px;\r\n    }\r\n\r\n    .rc {\r\n        width: 820px;\r\n    }\r\n    .task-form-item{\r\n        margin-left: 200px;\r\n        display: inline-block;\r\n    }\r\n\r\n    .task-btn-item {\r\n        padding-top: 0;\r\n        display: inline-block;\r\n        margin-left: 0px;\r\n        vertical-align: middle;\r\n        float: left;\r\n        padding-left: 10px;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views/hygl/gzzlgl"}]}