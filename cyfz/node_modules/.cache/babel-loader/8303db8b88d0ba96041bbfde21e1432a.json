{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js!D:\\vueWorkspace\\cyfz\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\vueWorkspace\\cyfz\\src\\lib\\dialogDrag.js","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\lib\\dialogDrag.js","mtime":1568987312123},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport Vue from 'vue'; // v-dialogDrag: 弹窗拖拽属性\n\nVue.directive('dialogDrag', {\n  bind: function bind(el, binding, vnode, oldVnode) {\n    var dialogHeaderEl = el.querySelector('.el-dialog__header');\n    var dragDom = el.querySelector('.el-dialog');\n    dialogHeaderEl.style.cursor = 'move'; // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\n\n    var sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null);\n\n    dialogHeaderEl.onmousedown = function (e) {\n      // 鼠标按下，计算当前元素距离可视区的距离\n      var disX = e.clientX - dialogHeaderEl.offsetLeft;\n      var disY = e.clientY - dialogHeaderEl.offsetTop; // 获取到的值带px 正则匹配替换\n\n      var styL, styT; // 注意在ie中 第一次获取到的值为组件自带50% 移动之后赋值为px\n\n      if (sty.left.includes('%')) {\n        styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100);\n        styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100);\n      } else {\n        styL = +sty.left.replace(/\\px/g, '');\n        styT = +sty.top.replace(/\\px/g, '');\n      }\n\n      document.onmousemove = function (e) {\n        // 通过事件委托，计算移动的距离\n        var l = e.clientX - disX;\n        var t = e.clientY - disY; // 移动当前元素\n\n        dragDom.style.left = \"\".concat(l + styL, \"px\");\n        dragDom.style.top = \"\".concat(t + styT, \"px\"); // 将此时的位置传出去\n        // binding.value({x:e.pageX,y:e.pageY})\n      };\n\n      document.onmouseup = function (e) {\n        document.onmousemove = null;\n        document.onmouseup = null;\n      };\n    };\n  }\n});",{"version":3,"sources":["D:\\vueWorkspace\\cyfz\\src\\lib\\dialogDrag.js"],"names":["Vue","directive","bind","el","binding","vnode","oldVnode","dialogHeaderEl","querySelector","dragDom","style","cursor","sty","currentStyle","window","getComputedStyle","onmousedown","e","disX","clientX","offsetLeft","disY","clientY","offsetTop","styL","styT","left","includes","document","body","clientWidth","replace","clientHeight","top","onmousemove","l","t","onmouseup"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB,C,CAEA;;AACAA,GAAG,CAACC,SAAJ,CAAc,YAAd,EAA4B;AACxBC,EAAAA,IADwB,gBACnBC,EADmB,EACfC,OADe,EACNC,KADM,EACCC,QADD,EACW;AAC/B,QAAMC,cAAc,GAAGJ,EAAE,CAACK,aAAH,CAAiB,oBAAjB,CAAvB;AACA,QAAMC,OAAO,GAAGN,EAAE,CAACK,aAAH,CAAiB,YAAjB,CAAhB;AACAD,IAAAA,cAAc,CAACG,KAAf,CAAqBC,MAArB,GAA8B,MAA9B,CAH+B,CAK/B;;AACA,QAAMC,GAAG,GAAGH,OAAO,CAACI,YAAR,IAAwBC,MAAM,CAACC,gBAAP,CAAwBN,OAAxB,EAAiC,IAAjC,CAApC;;AAEAF,IAAAA,cAAc,CAACS,WAAf,GAA6B,UAACC,CAAD,EAAO;AAChC;AACA,UAAMC,IAAI,GAAGD,CAAC,CAACE,OAAF,GAAYZ,cAAc,CAACa,UAAxC;AACA,UAAMC,IAAI,GAAGJ,CAAC,CAACK,OAAF,GAAYf,cAAc,CAACgB,SAAxC,CAHgC,CAKhC;;AACA,UAAIC,IAAJ,EAAUC,IAAV,CANgC,CAQhC;;AACA,UAAIb,GAAG,CAACc,IAAJ,CAASC,QAAT,CAAkB,GAAlB,CAAJ,EAA4B;AACxBH,QAAAA,IAAI,GAAG,CAACI,QAAQ,CAACC,IAAT,CAAcC,WAAf,IAA8B,CAAClB,GAAG,CAACc,IAAJ,CAASK,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAD,GAA+B,GAA7D,CAAP;AACAN,QAAAA,IAAI,GAAG,CAACG,QAAQ,CAACC,IAAT,CAAcG,YAAf,IAA+B,CAACpB,GAAG,CAACqB,GAAJ,CAAQF,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAAD,GAA8B,GAA7D,CAAP;AACH,OAHD,MAGO;AACHP,QAAAA,IAAI,GAAG,CAACZ,GAAG,CAACc,IAAJ,CAASK,OAAT,CAAiB,MAAjB,EAAyB,EAAzB,CAAR;AACAN,QAAAA,IAAI,GAAG,CAACb,GAAG,CAACqB,GAAJ,CAAQF,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,CAAR;AACH;;AAEDH,MAAAA,QAAQ,CAACM,WAAT,GAAuB,UAASjB,CAAT,EAAY;AAC/B;AACA,YAAMkB,CAAC,GAAGlB,CAAC,CAACE,OAAF,GAAYD,IAAtB;AACA,YAAMkB,CAAC,GAAGnB,CAAC,CAACK,OAAF,GAAYD,IAAtB,CAH+B,CAK/B;;AACAZ,QAAAA,OAAO,CAACC,KAAR,CAAcgB,IAAd,aAAwBS,CAAC,GAAGX,IAA5B;AACAf,QAAAA,OAAO,CAACC,KAAR,CAAcuB,GAAd,aAAuBG,CAAC,GAAGX,IAA3B,QAP+B,CAS/B;AACA;AACH,OAXD;;AAaAG,MAAAA,QAAQ,CAACS,SAAT,GAAqB,UAASpB,CAAT,EAAY;AAC7BW,QAAAA,QAAQ,CAACM,WAAT,GAAuB,IAAvB;AACAN,QAAAA,QAAQ,CAACS,SAAT,GAAqB,IAArB;AACH,OAHD;AAIH,KAlCD;AAmCH;AA5CuB,CAA5B","sourcesContent":["import Vue from 'vue';\r\n\r\n// v-dialogDrag: 弹窗拖拽属性\r\nVue.directive('dialogDrag', {\r\n    bind(el, binding, vnode, oldVnode) {\r\n        const dialogHeaderEl = el.querySelector('.el-dialog__header')\r\n        const dragDom = el.querySelector('.el-dialog')\r\n        dialogHeaderEl.style.cursor = 'move'\r\n\r\n        // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n        const sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null)\r\n\r\n        dialogHeaderEl.onmousedown = (e) => {\r\n            // 鼠标按下，计算当前元素距离可视区的距离\r\n            const disX = e.clientX - dialogHeaderEl.offsetLeft\r\n            const disY = e.clientY - dialogHeaderEl.offsetTop\r\n\r\n            // 获取到的值带px 正则匹配替换\r\n            let styL, styT\r\n\r\n            // 注意在ie中 第一次获取到的值为组件自带50% 移动之后赋值为px\r\n            if (sty.left.includes('%')) {\r\n                styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100)\r\n                styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100)\r\n            } else {\r\n                styL = +sty.left.replace(/\\px/g, '')\r\n                styT = +sty.top.replace(/\\px/g, '')\r\n            }\r\n\r\n            document.onmousemove = function(e) {\r\n                // 通过事件委托，计算移动的距离\r\n                const l = e.clientX - disX\r\n                const t = e.clientY - disY\r\n\r\n                // 移动当前元素\r\n                dragDom.style.left = `${l + styL}px`\r\n                dragDom.style.top = `${t + styT}px`\r\n\r\n                // 将此时的位置传出去\r\n                // binding.value({x:e.pageX,y:e.pageY})\r\n            }\r\n\r\n            document.onmouseup = function(e) {\r\n                document.onmousemove = null\r\n                document.onmouseup = null\r\n            }\r\n        }\r\n    }\r\n})\r\n"]}]}