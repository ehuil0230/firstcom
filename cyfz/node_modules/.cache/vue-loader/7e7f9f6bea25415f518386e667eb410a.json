{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\informationManagement\\MonthlyReportList.vue?vue&type=style&index=0&id=bac0f200&scoped=true&lang=css&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\informationManagement\\MonthlyReportList.vue","mtime":1571737549086},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.btName {\n    font-size: 40px;\n    text-align: center;\n}\n\n.cptjtwo {\n    width: 80%;\n    margin: 10px auto;\n}\n\n.monthTable {\n    width: 80%;\n    text-align: center;\n    margin: 15px auto 10px auto;\n}\n\n.zt3 {\n    text-align: center;\n}\n\n\n.inputwidth {\n    width: 250px;\n}\n\n.footer4{\n    text-align: center;\n}\n",{"version":3,"sources":["MonthlyReportList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6rBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA","file":"MonthlyReportList.vue","sourceRoot":"src/views/hygl/informationManagement","sourcesContent":["<template>\r\n    <div id=\"monthly\">\r\n        <div style=\"padding: 10px 20px;text-align: left\"><!-- -->\r\n            <el-button v-if=\"packageStatus === 'hlw'\" icon=\"el-icon-edit-outline\" type=\"primary\" size=\"small\" @click=\"add\">新建</el-button>\r\n            <el-button v-if=\"packageStatus === 'hlw'\" icon=\"el-icon-edit\" @click=\"update\" size=\"small\" type=\"primary\">修改</el-button>\r\n        </div>\r\n        <tableList ref=\"table\"\r\n                   index\r\n                   :getDataWay=\"getDataWaystry\"\r\n                   :columns=\"columns\"\r\n                   :pagination=\"pagination\"\r\n                   :checkedData='checkedData'\r\n                   selection><!--v-bind:selection=\"packageStatus === 'hlw'?true:false\"-->\r\n            <el-table-column label=\"所属年月\" :width=\"95\" slot=\"yearMonth\" show-overflow-tooltip>\r\n                <template slot-scope=\"scope\">\r\n                    <el-link :underline=\"true\" @click.stop=\"show(scope.row)\" class=\"a-link\">\r\n                        {{scope.row.yearMonth}}\r\n                    </el-link>\r\n                </template>\r\n            </el-table-column>\r\n        </tableList>\r\n        <el-dialog title=\"揭榜产品指标月填报\"\r\n                   v-if=\"dialogFormVisible\"\r\n                   :visible.sync=\"dialogFormVisible\"\r\n                   width=\"1100px\"\r\n                   class=\"diawz\"\r\n                   :close-on-click-modal=\"false\">\r\n            <el-form :model=\"stryForm\" :rules=\"rules\" ref=\"stryForm\" label-width=\"100px\" class=\"demo-stryForm\"\r\n                     style=\"position:relative\">\r\n                <div class=\"demo-input-suffix\">\r\n                    <div class=\"btName\">揭榜产品指标月填报</div>\r\n                </div>\r\n                <table class=\"monthTable\">\r\n                    <tr>\r\n                        <td>\r\n                            <el-form-item label=\"所属年月\" prop=\"givenYearMonth\"\r\n                                          :rules=\"[{ required: true, message: '所属年月不能为空'}]\">\r\n                                <el-date-picker :disabled=\"state>=2\"\r\n                                                style=\"width: 250px\"\r\n                                        v-model=\"stryForm.givenYearMonth\"\r\n                                        format=\"yyyy-MM\"\r\n                                        value-format=\"yyyy-MM\"\r\n                                        type=\"month\"\r\n                                        @change=\"timeVal(stryForm.givenYearMonth)\"\r\n                                        size=\"small\"\r\n                                        :picker-options=\"pickerOptions\"\r\n                                        placeholder=\"选择年月\">\r\n                                </el-date-picker>\r\n                            </el-form-item>\r\n                        </td>\r\n                        <td>\r\n                            <el-form-item label=\"电力消费额\" prop=\"powerCost\"\r\n                                          :rules=\"[{ required: true, message: '电力消费额不能为空'},\r\n                                                    { type: 'number', message: '电力消费额必须为数字值'},\r\n                                                    {pattern:/^\\d{1,12}$/, message: '长度在1到12个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\"\r\n                                          v-model.number=\"stryForm.powerCost\"\r\n                                          class=\"kd inputwidth\" size=\"small\">\r\n                                </el-input>\r\n                            </el-form-item>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <el-form-item label=\"利润总额\" prop=\"totalRevenue\"\r\n                                          :rules=\"[{ required: true, message: '利润总额不能为空'},\r\n                                                   { type: 'number', message: '利润总额必须为数字值'},\r\n                                                    {pattern:/^\\d{1,12}$/, message: '长度在1到12个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\"\r\n                                          v-model.number=\"stryForm.totalRevenue\"\r\n                                          class=\"inputwidth\" size=\"small\">\r\n                                </el-input>\r\n                            </el-form-item>\r\n                        </td>\r\n                        <td>\r\n                            <el-form-item label=\"税收\" prop=\"taxRevenue\"\r\n                                          :rules=\"[{ required: true, message: '税收不能为空'},\r\n                                                   { type: 'number', message: '税收必须为数字值'},\r\n                                                    {pattern:/^\\d{1,12}$/, message: '长度在1到12个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\"\r\n                                          v-model.number=\"stryForm.taxRevenue\"\r\n                                          class=\"inputwidth\" size=\"small\">\r\n                                </el-input>\r\n                            </el-form-item>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <div class=\"cptjtwo\">\r\n                    <el-button type=\"primary\" :disabled=\"state>=2\" size=\"small\" @click=\"projectadd\" style=\"margin-bottom: 10px\">产品添加</el-button>\r\n                    <tableList\r\n                                ref=\"tableInfo\"\r\n                               highlight-current-row\r\n                               :getDataWay=\"getprojectDataWay\"\r\n                               :columns=\"projectInfocolumns\"\r\n                               :pagination=\"pagination1\">\r\n                        <el-table-column label=\"操作\" slot=\"opts\" width=\"180\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-button type=\"primary\" @click=\"See(scope.row)\">编辑</el-button>\r\n                                <el-button type=\"primary\" :disabled=\"state>=2\" @click=\"del(scope.row)\">删除</el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </tableList>\r\n                    <el-dialog v-if=\"dialogprojectFormVisible\"\r\n                               title=\"产品添加\" append-to-body\r\n                               :visible.sync=\"dialogprojectFormVisible\"\r\n                               width=\"600px\"\r\n                               :close-on-click-modal=\"false\">\r\n                        <el-form :model=\"productForm\" ref=\"productForm\" label-width=\"120px\"\r\n                                 class=\"demo-ruleForm\">\r\n                            <el-form-item\r\n                                    label=\"产品名称\"\r\n                                    prop=\"productName\"\r\n                                    :rules=\"[{ required: true, message: '产品名称不能为空'},\r\n                                    {min:1,max:50,message: '长度在1到50个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\" type=\"productName\" v-model=\"productForm.productName\" autocomplete=\"off\"\r\n                                          clearable></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item\r\n                                    label=\"产品销售收入\"\r\n                                    prop=\"productSellingRevenue\"\r\n                                    :rules=\"[{ required: true, message: '产品销售收入不能为空'},\r\n                                    { type: 'number', message: '产品销售必须为数字值'},\r\n                                    {pattern:/^\\d{1,12}$/, message: '长度在1到12个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\" type=\"productSellingRevenue\"\r\n                                          v-model.number=\"productForm.productSellingRevenue\" autocomplete=\"off\"\r\n                                          clearable></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"重点方向\"\r\n                                          prop=\"majorDirectionDm\"\r\n                                          :rules=\"[{ required: true, message: '重点方向不能为空'}]\">\r\n                                <el-select :disabled=\"state>=2\" v-model=\"productForm.majorDirectionDm\">\r\n                                    <el-option v-for=\"item in zdList\" :label=\"item.CAPTION\" :value=\"item.CODE\"></el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"揭榜方向\"\r\n                                          prop=\"claimDirectionDm\"\r\n                                          :rules=\"[{ required: true, message: '揭榜方向不能为空'}]\">\r\n                                <el-select  :disabled=\"productForm.majorDirectionDm === ''||state>=2\" v-model=\"productForm.claimDirectionDm\">\r\n                                    <el-option v-for=\"item in jbList\" :label=\"item.CAPTION\" :value=\"item.CODE\"></el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"领域方向\"\r\n                                          prop=\"areaDirectionDm\"\r\n                                          :rules=\"[{ required: true, message: '领域方向不能为空'}]\">\r\n                                <el-select :disabled=\"productForm.claimDirectionDm === ''||state>=2\" v-model=\"productForm.areaDirectionDm\">\r\n                                    <el-option v-for=\"item in lyList\" :label=\"item.CAPTION\" :value=\"item.CODE\"></el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                            <el-form-item\r\n                                    label=\"产品描述\"\r\n                                    prop=\"conclusion\"\r\n                                    :rules=\"[{ required: true, message: '产品描述不能为空'},\r\n                                            {min:1,max:1000,message: '长度在1到1000个字符'}]\">\r\n                                <el-input :disabled=\"state>=2\" v-model=\"productForm.conclusion\" type=\"textarea\"\r\n                                          :rows=\"2\"\r\n                                          placeholder=\"请输入内容\" autocomplete=\"off\"></el-input>\r\n                            </el-form-item>\r\n\r\n                            <div class=\"zt3\">\r\n                                <el-button :disabled=\"state>=2\" type=\"primary\" @click=\"submitForm('productForm')\">保存</el-button>\r\n                                <el-button :disabled=\"state>=2\" @click=\"resetForm('productForm')\">重置</el-button>\r\n                            </div>\r\n                        </el-form>\r\n                    </el-dialog>\r\n                </div>\r\n                <div class=\"footer4\">\r\n                    <el-button type=\"primary\" :disabled=\"state>=2\" @click=\"submitFormyb('stryForm')\">保存</el-button>\r\n                    <el-button type=\"primary\" :disabled=\"state>=2\" @click=\"resetFormyb('stryForm')\">提交</el-button>\r\n                </div>\r\n            </el-form>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import tableList from '@/components/grid/TableList.vue';\r\n\r\n    export default {\r\n        name: \"MonthlyReportList\",\r\n        components: {\r\n            tableList\r\n        },\r\n        data() {\r\n            return {\r\n                uuids:'',\r\n                packageStatus:this.$packageStatus,\r\n                checkedData: [],\r\n                //月报分页\r\n                pagination: {\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                    pageSizes: [5, 10, 20, 50],//默认每页显示多少条\r\n                    position: 'center',\r\n                    layout: 'sizes ,total,prev, pager, next, jumper'\r\n                },\r\n                //月报产品分页\r\n                //分页\r\n                pagination1: {\r\n                    currentPage: 1,\r\n                    pageSize: 5,\r\n                    pageSizes: [5, 10, 20],//默认每页显示多少条\r\n                    position: 'center',\r\n                    layout: 'sizes ,total,prev, pager, next, jumper'\r\n                },\r\n                stryForm: {\r\n                    uuid:'',\r\n                    taxRevenue: \"\",\r\n                    totalRevenue: \"\",\r\n                    givenYearMonth: \"\",\r\n                    givenYear: \"\",\r\n                    givenMonth: \"\",\r\n                    powerCost: \"\",\r\n                },\r\n                productForm: {\r\n                    uuid:'',\r\n                    productName: \"\",\r\n                    majorDirectionDm: \"\",\r\n                    claimDirectionDm: \"\",\r\n                    areaDirectionDm: \"\",\r\n                    conclusion: \"\",\r\n                    productSellingRevenue: \"\",\r\n                },\r\n                rules: {},\r\n                // 查询月报列表  内外网\r\n                getDataWaystry: {\r\n                    dataType: \"url\",\r\n                    type: 'post',\r\n                    data: this.$api.hyglApi.queryComMonthly,\r\n                    param: {\r\n                        netType: this.$packageStatus==='zwww'?'in':'ex',\r\n                    }\r\n                }, // 通过url方式\r\n\r\n                getprojectDataWay: {\r\n                    dataType: \"url\",\r\n                    type: 'post',\r\n                    data: this.$api.hyglApi.queryClaimProduct,\r\n                    param: {\r\n                        flag:'month',\r\n                        uuids: this.uuids,\r\n                    }\r\n                },\r\n                columns: [\r\n                    {\r\n                        label: ' 所属年月',\r\n                        prop: 'yearMonth',\r\n                        template:true,\r\n                    },\r\n                    {\r\n                        label: '企业名称',\r\n                        prop: 'comName',\r\n                        width: '140',\r\n                    },\r\n                    {\r\n                        label: '利润总额',\r\n                        prop: 'totalRevenue',\r\n                        width: '140',\r\n                    },\r\n                    {\r\n                        label: '税收',\r\n                        prop: 'taxRevenue',\r\n                        width: '140',\r\n                    },\r\n                    {\r\n                        label: '电力消费',\r\n                        prop: 'powerCost',\r\n                        width: '140',\r\n                    },\r\n                    {\r\n                        label: '填报时间',\r\n                        prop: 'createTime',\r\n                        showOverflowTooltip: false,\r\n                    },\r\n                ],\r\n                projectInfocolumns: [\r\n                    {\r\n                        label: ' 产品名称',\r\n                        prop: 'productName',\r\n\r\n                    }, {\r\n                        label: '操作',\r\n                        prop: 'opts',\r\n                        template: true //添加模板，一般处理操作列(注意：tempate、formatter不能同时使用)\r\n\r\n                    },\r\n                ],\r\n                dialogFormVisible: false,\r\n                dialogprojectFormVisible: false,\r\n                formLabelWidth: '120px',\r\n                zdList:[],\r\n                jbList:[],\r\n                lyList:[],\r\n                isNotNew:'N',//判断是否新建按钮标识\r\n                isNotProductUpdate:'N',//判断是否是产品编辑按钮酒标识\r\n                state:'',//控制月报是否可修改\r\n                tableid: '',\r\n                //只能选择本月以前包含本月的月份\r\n                pickerOptions:{\r\n                    disabledDate(time) {\r\n                        return time.getTime() > Date.now()-8.64e7;\r\n                    },\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            //年份改变事件\r\n            timeVal(val){\r\n                var arr = val.split('-');\r\n                this.stryForm.givenYear = arr[0];\r\n                this.stryForm.givenMonth = arr[1];\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.getComMonthlyYMStatus,\r\n                    data: {\r\n                        uuid:this.stryForm.uuid,\r\n                        givenYear: this.stryForm.givenYear,\r\n                        givenMonth: this.stryForm.givenMonth,\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        if(res.info) {\r\n                            if(res.info==='N') {\r\n                                that.stryForm.givenYearMonth = '';\r\n                                that.$message({\r\n                                    message: val+'月不可使用，请重新选择',\r\n                                    type: 'error'\r\n                                });\r\n                            }\r\n                        }\r\n                    }else {\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {})\r\n                        return false\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {})\r\n                    return false\r\n                })\r\n            },\r\n            //新建\r\n            add: function () {\r\n                this.stryForm = {\r\n                    uuid:'',\r\n                    taxRevenue: \"\",\r\n                    totalRevenue: \"\",\r\n                    givenYearMonth: \"\",\r\n                    givenYear: \"\",\r\n                    givenMonth: \"\",\r\n                    powerCost: \"\",\r\n                }\r\n                this.uuids = '';\r\n                this.state = -1;\r\n                this.isNotNew = 'Y';\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.getComSelfcommentByAnnualId,\r\n                    data: {\r\n\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        if(res.info){\r\n                            if(res.info.state===1){\r\n                                that.dialogFormVisible = true;\r\n                            }else {\r\n                                that.$message({\r\n                                    message: '请先保存并提交自评表',\r\n                                    type: 'error'\r\n                                });\r\n                                return;\r\n                            }\r\n                        }else {\r\n                            that.$message({\r\n                                message: '请先保存并提交自评表',\r\n                                type: 'error'\r\n                            });\r\n                            return;\r\n                        }\r\n                    }else{\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\r\n                        return false;\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                    return false;\r\n                })\r\n            },\r\n            //修改\r\n            update() {\r\n                if (this.checkedData.length > 1 || this.checkedData.length == 0) {\r\n                    this.$alert(\"请选择一条数据进行修改！\", \"提示\", {\r\n                        type: 'warning'\r\n                    })\r\n                } else {\r\n                    this.dialogFormVisible=true;\r\n                    this.stryForm.powerCost = this.checkedData[0].powerCost;\r\n                    this.stryForm.uuid = this.checkedData[0].uuid;\r\n                    this.stryForm.totalRevenue = this.checkedData[0].totalRevenue;\r\n                    this.stryForm.taxRevenue = this.checkedData[0].taxRevenue;\r\n                    this.stryForm.givenYearMonth = this.checkedData[0].yearMonth;\r\n                    this.uuids = this.checkedData[0].uuids;\r\n                    this.state = this.checkedData[0].state;\r\n                    this.isNotNew = 'N';\r\n                }\r\n            },\r\n            //产品添加按钮\r\n            projectadd: function () {\r\n                this.getZdList();\r\n                this.dialogprojectFormVisible = true;\r\n                this.productForm = {\r\n                    uuid:'',\r\n                    productName: \"\",\r\n                    majorDirectionDm: \"\",\r\n                    claimDirectionDm: \"\",\r\n                    areaDirectionDm: \"\",\r\n                    conclusion: \"\",\r\n                    productSellingRevenue: \"\",\r\n                }\r\n                this.isNotProductUpdate = 'N';\r\n            },\r\n            //产品添加\r\n            submitForm(formName) {\r\n                this.$refs[formName].validate((valid) => {\r\n                    let that = this;\r\n                    if (valid) {\r\n                        this.$$request({\r\n                            url: this.$api.hyglApi.saveClaimProduct,\r\n                            data: Object.assign(this.productForm, {\r\n                                \"isMonthly\":\"1\",\r\n                                \"state\": \"1\"\r\n                            })\r\n                        }).then(function (res) {\r\n                            if (res.result === 1) {\r\n                                that.$message({\r\n                                    message: '保存成功',\r\n                                    type: 'success'\r\n                                });\r\n                                if(that.uuids){\r\n                                    that.uuids += ','+ res.info.uuid;\r\n                                }else{\r\n                                    that.uuids = res.info.uuid;\r\n                                }\r\n                                that.dialogprojectFormVisible = false;\r\n                                that.$refs[formName].resetFields();\r\n                            } else {\r\n                                that.$message({\r\n                                    message: '保存失败',\r\n                                    type: 'error'\r\n                                });\r\n                            }\r\n                        })\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n            },\r\n            //产品重置\r\n            resetForm(formName) {\r\n                this.$refs[formName].resetFields();\r\n                this.productForm.majorDirectionDm = '';\r\n                this.productForm.claimDirectionDm = '';\r\n                this.productForm.areaDirectionDm = '';\r\n            },\r\n            //产品查看\r\n            See: function (row) {    //查看\r\n                this.dialogprojectFormVisible = true;\r\n                this.productForm.uuid =  row.uuid;\r\n                this.productForm.productName = row.productName;\r\n                this.productForm.conclusion = row.conclusion;\r\n                this.productForm.productSellingRevenue = row.productSellingRevenue;\r\n                this.$set(this.productForm,'majorDirectionDm',row.majorDirectionDm);\r\n                this.$set(this.productForm,'claimDirectionDm',row.claimDirectionDm);\r\n                this.$set(this.productForm,'areaDirectionDm',row.areaDirectionDm);\r\n                this.isNotProductUpdate = 'Y';\r\n                this.getZdList();\r\n            },\r\n            //查询重点方向\r\n            getZdList(){\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.queryTableFromRedisByTableName,\r\n                    data: {\r\n                        tableName:'DM_MAJOR_DIRECTION',\r\n                    }\r\n                }).then(function (res) {\r\n                    if(res.result === 1){\r\n                        that.zdList = res.info;\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                })\r\n            },\r\n            //产品删除\r\n            del: function (row) {\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.deleteClaimProductByUuid,\r\n                    data: {\r\n                        uuid: row.uuid,\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result == 1) {\r\n                        that.$message({\r\n                            message: '删除成功',\r\n                            type: 'success'\r\n                        });\r\n                        let arr = that.uuids.split(\",\");\r\n                        arr.splice(arr.indexOf(row.uuid),1);\r\n                        that.uuids = arr.join(',');\r\n                    } else {\r\n                        that.$message({\r\n                            message: '删除失败',\r\n                            type: 'error'\r\n                        });\r\n                    }\r\n                }).then(function () {\r\n                    that.$refs.tableInfo.loadData()\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                })\r\n            },\r\n            //保存月报\r\n            submitFormyb: function (formName) {\r\n                let that = this;\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        this.$$request({\r\n                            method: 'post',\r\n                            url: this.$api.hyglApi.saveComMonthly,\r\n                            data: Object.assign(this.stryForm, {\r\n                                \"uuids\": this.uuids,\r\n                            })\r\n                        }).then(function (res) {\r\n                            if (res.result == 1) {\r\n                                that.$message({\r\n                                    message: '保存成功',\r\n                                    type: 'success'\r\n                                });\r\n                                that.$set(that.stryForm,'uuid',res.info.uuid);\r\n                                that.$refs.table.loadData();\r\n                            }else{\r\n                                that.$message({\r\n                                    message: '保存失败',\r\n                                    type: 'error'\r\n                                });\r\n                            }\r\n                        })\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n            },\r\n            //提交月报\r\n            resetFormyb: function (formName) {\r\n                let that = this;\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        this.$axios({\r\n                            method: 'post',\r\n                            url: this.$api.hyglApi.saveComMonthly,\r\n                            data:  Object.assign(this.stryForm, {\r\n                                \"uuids\": this.uuids,\r\n                            })\r\n                        }).then(function (res) {\r\n                            if (res.result == 1) {\r\n                                that.$set(that.stryForm,'uuid',res.info.uuid);\r\n                            }\r\n                        }).then(function () {\r\n                            that.changeStatus();\r\n                        })\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n            },\r\n            //展示\r\n            show:function (row) {\r\n                this.dialogFormVisible=true;\r\n                this.stryForm.powerCost = row.powerCost;\r\n                this.stryForm.uuid = row.uuid;\r\n                this.stryForm.totalRevenue = row.totalRevenue;\r\n                this.stryForm.taxRevenue = row.taxRevenue;\r\n                this.stryForm.givenYearMonth = row.yearMonth;\r\n                this.uuids = row.uuids;\r\n                this.state = row.state;\r\n                this.isNotNew = 'N';\r\n            },\r\n            //提交改变状态\r\n            changeStatus(){\r\n                let that = this;\r\n                this.$$request({\r\n                    url: that.$api.hyglApi.saveSubmitInfo,\r\n                    data: {\r\n                        state : '0',\r\n                        approvalDm : '020003',\r\n                        tableid : that.stryForm.uuid,\r\n                        title: that.stryForm.givenYear +'-'+that.stryForm.givenMonth+'月报',\r\n                        isMonthly: '1',\r\n                    }\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        that.$message({\r\n                            message: '提交成功',\r\n                            type: 'success'\r\n                        });\r\n                        that.dialogFormVisible = false;\r\n                        that.$refs.table.loadData();\r\n                    }else{\r\n                        that.$message({\r\n                            message: '提交失败',\r\n                            type: 'error'\r\n                        });\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                    return false;\r\n                })\r\n            },\r\n        },\r\n        watch:{\r\n            uuids:function (newVal,oldVal) {\r\n                if(newVal!=oldVal){\r\n                    this.$set(this.getprojectDataWay,'param',{ uuids:this.uuids,flag : 'temp'});\r\n                    if(this.$refs.tableInfo) {\r\n                        this.$refs.tableInfo.loadData();\r\n                    }\r\n                }\r\n            },\r\n            'productForm.majorDirectionDm':function (val,oldVal) {\r\n                let that = this;\r\n                if(val !== oldVal){\r\n                    if(this.isNotNew === 'Y'){//新建进来\r\n                        if(this.isNotProductUpdate === 'N'){\r\n                            this.productForm.claimDirectionDm = \"\";\r\n                            this.productForm.areaDirectionDm = \"\";\r\n                        }\r\n                    }else{\r\n                        if(this.state<0){//未提交\r\n                            if(this.isNotProductUpdate === 'N'){\r\n                                this.productForm.claimDirectionDm = \"\";\r\n                                this.productForm.areaDirectionDm = \"\";\r\n                            }\r\n                        }\r\n                    }\r\n                    this.lyList = [];\r\n                    if(val !== ''){\r\n                        this.$$request({\r\n                            url: this.$api.hyglApi.querySubSelcetListByTableNameAndParentCode,\r\n                            data: {\r\n                                tableName:\"DM_CLAIM_DIRECTION\",\r\n                                parentCode: val\r\n                            }\r\n                        }).then(function (res) {\r\n                            if(res.result === 1){\r\n                                that.jbList = res.info;\r\n                            }\r\n                        }).catch(function (error) {\r\n                            that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                        })\r\n                    }else{\r\n                        this.jbList = [];\r\n                    }\r\n                }\r\n            },\r\n            'productForm.claimDirectionDm':function (val,old) {\r\n                let that = this;\r\n                if(val !== old){\r\n                    if(this.isNotNew === 'Y'){//新建进来\r\n                        if(this.isNotProductUpdate === 'N'){\r\n                            this.productForm.areaDirectionDm = \"\";\r\n                        }\r\n                    }else{\r\n                        if(this.state<0){//未提交\r\n                            if(this.isNotProductUpdate === 'N') {\r\n                                this.productForm.areaDirectionDm = \"\";\r\n                            }\r\n                        }\r\n                    }\r\n                    if(val !== ''){\r\n                        this.$$request({\r\n                            url: this.$api.hyglApi.querySubSelcetListByTableNameAndParentCode,\r\n                            data: {\r\n                                tableName:\"DM_AREA_DIRECTION\",\r\n                                parentCode: val\r\n                            }\r\n                        }).then(function (res) {\r\n                            if(res.result === 1){\r\n                                that.lyList = res.info;\r\n                            }\r\n                        }).catch(function (error) {\r\n                            that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                        })\r\n                    }else{\r\n                        this.lyList = [];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .btName {\r\n        font-size: 40px;\r\n        text-align: center;\r\n    }\r\n\r\n    .cptjtwo {\r\n        width: 80%;\r\n        margin: 10px auto;\r\n    }\r\n\r\n    .monthTable {\r\n        width: 80%;\r\n        text-align: center;\r\n        margin: 15px auto 10px auto;\r\n    }\r\n\r\n    .zt3 {\r\n        text-align: center;\r\n    }\r\n\r\n\r\n    .inputwidth {\r\n        width: 250px;\r\n    }\r\n\r\n    .footer4{\r\n        text-align: center;\r\n    }\r\n</style>\r\n"]}]}