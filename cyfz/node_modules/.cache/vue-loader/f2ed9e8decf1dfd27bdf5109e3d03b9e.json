{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\demo\\toolBar\\toolbarPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\demo\\toolBar\\toolbarPage.vue","mtime":1568987312143},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport toolbar from \"@/components/toolbar/toolbar\"\nimport tableList from '@/components/grid/TableList.vue';\nimport tableSet from '@/components/grid/TableSet.vue';\n\n\nexport default {\n    name: \"toolbarPage\",\n    components: {\n        toolbar,\n        tableList,\n        tableSet\n    },\n    data: () => {\n        return {\n            setVisible:false,\n            tableSet:{set:{ \"tableSize\": \"大\",\n                    \"caption\": \"测试\",\n                    \"tableScale\": 100,}},\n            dialogVisible: false,\n            toolbarItem:[\n                {\n                    type:\"primary\",\n                    title:\"刷新\",\n                    icon:\"el-icon-refresh\",\n                    disabled:false,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"编辑\",\n                    icon:\"el-icon-edit-outline\",\n                    disabled:true,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"列表设置\",\n                    icon:\"el-icon-s-grid\",\n                    disabled:false,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:true,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新列表\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:true,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:true,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新列表\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:false,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:false,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新列表\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:false,\n                    click:\"refresh\"\n                },\n                {\n                    type:\"primary\",\n                    title:\"刷新\",\n                    icon:\"el-icon-arrow-left\",\n                    disabled:false,\n                    click:\"refresh\"\n                }\n            ],\n            getDataWay:{dataType:\"url\",firstRequest:false, type:\"get\",data:'/mockData/threeMeetingsOneClass/data.json',param:{}}, // 通过url方式\n            columns: [\n                // {\n                //     label: '会议名称',\n                //     prop: 'name',\n                //     width: '180',\n                //     showOverflowTooltip:true,\n                //     template: true\n                // }\n            ],\n\n            pagination: {\n                currentPage: 1,\n                pageSize: 10,\n                position: 'right',\n                pageSizes:[10,50,100],//默认每页显示多少条\n                layout: 'sizes ,prev, pager, next, jumper'\n            },\n\n            tableScale:100,\n            columnsData:[], // 显示需要设置的表格列\n        }\n    },\n    created(){\n        let param={}\n        let _this=this\n        this.$axios({\n            method: 'get',\n            url: _this.getDataWay.data,\n            data: param\n        }).then(function (data) {\n            if (data && data.list) {\n                //初始化数据格式\n                // this.dealWithData(setJson)\n                _this.$refs.table.tableData = data.list\n\n                _this.columns =  _this.filterColumnByShow(data.columnsData)\n                _this.pagination.pageSize = data.tableSet.pageSize\n                data.tableSet.pageSizes = _this.pagination.pageSizes\n                _this.tableSet = {columnsData:data.columnsData,set:data.tableSet}\n                _this.loading=false\n            } else {\n                //console.info(data.msg)\n            }\n        }).then(()=>{\n            _this.selectData()\n        }).catch(function (error) {\n        });\n    },\n    mounted() {\n        // this.columns = JSON.parse(localStorage.getItem(\"customColumn\"))\n        // this.$refs.table.tableData=[]\n        //this.getTableData()\n        //this.$refs.table.setTableHeight(600) //传给表格高度\n    },\n    methods: {\n        filterColumnByShow(list = []){\n            let showList = []\n            list.forEach(item=>{\n                if(item.show.toString() === 'true'){\n                    showList.push(item)\n                }\n            })\n            return showList\n        },\n        modifySet(obj){\n            console.log(obj);\n            this.columns =  this.filterColumnByShow(obj.columnsData)\n            this.tableSet = obj\n        },\n        getTableData:function(){ // 发送请求获取表格所有数据包括：列展示与不展示和表格配置信息\n\n        },\n        columnChange(obj){\n            // localStorage.setItem('customColumn',JSON.stringify(obj))\n        },\n        showDialog() {\n            this.dialogVisible = true\n            this.handleSelectionChange(this.columnsData)\n        },\n        toolbarClick(item,event){\n            if(item.title=='列表设置'){\n                //this.dialogVisible = true\n\n                this.setVisible = true\n            }\n        },\n        handleSelectionChange(val) { // 获取选中的列\n            let temp = [];\n            this.columnsData.forEach((item)=>{\n                if(JSON.stringify(val).indexOf(JSON.stringify(item))>0){\n                    temp.push(item)\n                }\n            })\n            this.multipleSelection = temp;\n        },\n        setBtn:function(){ // 表格设置项\n            this.dialogVisible = false\n            let setJson={}//需要的json串\n            if(!!this.multipleSelection&&this.multipleSelection.length>0){\n                setJson.columns=this.multipleSelection //显示列\n            }\n            setJson.fontSize=this.fontSize //表格字体大小设置\n            setJson.size= this.pSize //默认每页显示多少条\n            setJson.tableName= this.tableName\n            setJson.tableWidthScale= this.tableWidthScale\n            this.dealWithData(setJson)\n        },\n        // 处理数据\n        dealWithData:function(obj){\n            if(!!obj.columns&&obj.columns.length>0) {\n                this.columns = obj.columns\n            }\n            this.chooseSize=obj.fontSize\n            this.pagination.pageSize= obj.size\n            this.caption=obj.tableName\n            this.tableScale= parseInt(obj.tableWidthScale)\n        },\n        objectSpanMethod({ row, column, rowIndex, columnIndex }) {\n            if (columnIndex === 2) {\n                if (rowIndex % 2 === 0) {\n                    return {\n                        rowspan: 2,\n                        colspan: 1\n                    };\n                } else {\n                    return {\n                        rowspan: 0,\n                        colspan: 0\n                    };\n                }\n            }\n        }\n    },\n    watch: {\n        '$store.state.screenWidth'(newValue, oldValue) {\n            this.clientWidth = this.$el.clientWidth\n            //this.$refs.table\n        },\n        '$store.state.screenHeight'(newValue, oldValue) {\n            //let div1H = this.$refs.div1.offsetHeight\n            let div2H = parseInt(this.$refs.div2.offsetHeight)\n            let clientHeight = this.$store.state.contentHeight\n            console.info(div2H,clientHeight,clientHeight - div2H)\n            this.$refs.table.setTableHeight(clientHeight - div2H)\n\n        }\n    },\n}\n",{"version":3,"sources":["toolbarPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"toolbarPage.vue","sourceRoot":"src/views/demo/toolBar","sourcesContent":["<template>\r\n    <div>\r\n        <toolbar ref=\"div1\" position=\"right\" style=\"margin: 10px ;\" :toolbarItem=\"toolbarItem\" @toolbarClick=\"toolbarClick\"></toolbar>\r\n        <div style=\"margin-right: 100px\">\r\n            <tableList ref=\"table\"\r\n                       style=\"border-top: none;\"\r\n                       :getDataWay=\"getDataWay\"\r\n                       :columns=\"columns\"\r\n                       :tableSize=\"tableSet.set.tableSize\"\r\n                       selection\r\n                       @columnChange= 'columnChange'\r\n                       :caption=\"tableSet.set.caption\"\r\n                       :tableScale=\"tableSet.set.tableScale\"\r\n                       :spanMethod=\"objectSpanMethod\"\r\n                       \r\n            >\r\n                <el-table-column label=\"会议名称\" slot=\"name\" show-overflow-tooltip>\r\n                    <template slot-scope=\"scope\">\r\n                        <a href=\"#\" class=\"a-link\">\r\n                            {{scope.row.name}}\r\n                        </a>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" slot=\"opts\" width=\"90\">\r\n                    <template v-slot=\"scope\">\r\n                        <el-dropdown>\r\n                        <span class=\"el-dropdown-link\">\r\n                            操作\r\n                        </span>\r\n                            <el-dropdown-menu slot=\"dropdown\">\r\n                                <el-dropdown-item><span @click=\"look(scope.row)\">查看</span></el-dropdown-item>\r\n                                <el-dropdown-item>编辑</el-dropdown-item>\r\n                                <el-dropdown-item>删除</el-dropdown-item>\r\n                                <el-dropdown-item><router-link :to=\"{name:'participants', params:{moduleName:'worktab_1',meetingId:'123'}}\">会议人员</router-link></el-dropdown-item>\r\n                                <el-dropdown-item><span @click=\"write(scope.row)\">撰写会议纪要</span></el-dropdown-item>\r\n                            </el-dropdown-menu>\r\n                        </el-dropdown>\r\n                    </template>\r\n                </el-table-column>\r\n            </tableList>\r\n        </div>\r\n        <div ref=\"div2\" style=\"height:200px;border:1px solid #ccc;padding: 10px;\"></div>\r\n        <tableSet v-if=\"setVisible\" :setVisible.sync=\"setVisible\" :tableSet=\"tableSet\" @modifySet=\"modifySet\"></tableSet>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import toolbar from \"@/components/toolbar/toolbar\"\r\n    import tableList from '@/components/grid/TableList.vue';\r\n    import tableSet from '@/components/grid/TableSet.vue';\r\n\r\n\r\n    export default {\r\n        name: \"toolbarPage\",\r\n        components: {\r\n            toolbar,\r\n            tableList,\r\n            tableSet\r\n        },\r\n        data: () => {\r\n            return {\r\n                setVisible:false,\r\n                tableSet:{set:{ \"tableSize\": \"大\",\r\n                        \"caption\": \"测试\",\r\n                        \"tableScale\": 100,}},\r\n                dialogVisible: false,\r\n                toolbarItem:[\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新\",\r\n                        icon:\"el-icon-refresh\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"编辑\",\r\n                        icon:\"el-icon-edit-outline\",\r\n                        disabled:true,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"列表设置\",\r\n                        icon:\"el-icon-s-grid\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:true,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新列表\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:true,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:true,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新列表\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新列表\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    },\r\n                    {\r\n                        type:\"primary\",\r\n                        title:\"刷新\",\r\n                        icon:\"el-icon-arrow-left\",\r\n                        disabled:false,\r\n                        click:\"refresh\"\r\n                    }\r\n                ],\r\n                getDataWay:{dataType:\"url\",firstRequest:false, type:\"get\",data:'/mockData/threeMeetingsOneClass/data.json',param:{}}, // 通过url方式\r\n                columns: [\r\n                    // {\r\n                    //     label: '会议名称',\r\n                    //     prop: 'name',\r\n                    //     width: '180',\r\n                    //     showOverflowTooltip:true,\r\n                    //     template: true\r\n                    // }\r\n                ],\r\n\r\n                pagination: {\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                    position: 'right',\r\n                    pageSizes:[10,50,100],//默认每页显示多少条\r\n                    layout: 'sizes ,prev, pager, next, jumper'\r\n                },\r\n\r\n                tableScale:100,\r\n                columnsData:[], // 显示需要设置的表格列\r\n            }\r\n        },\r\n        created(){\r\n            let param={}\r\n            let _this=this\r\n            this.$axios({\r\n                method: 'get',\r\n                url: _this.getDataWay.data,\r\n                data: param\r\n            }).then(function (data) {\r\n                if (data && data.list) {\r\n                    //初始化数据格式\r\n                    // this.dealWithData(setJson)\r\n                    _this.$refs.table.tableData = data.list\r\n\r\n                    _this.columns =  _this.filterColumnByShow(data.columnsData)\r\n                    _this.pagination.pageSize = data.tableSet.pageSize\r\n                    data.tableSet.pageSizes = _this.pagination.pageSizes\r\n                    _this.tableSet = {columnsData:data.columnsData,set:data.tableSet}\r\n                    _this.loading=false\r\n                } else {\r\n                    //console.info(data.msg)\r\n                }\r\n            }).then(()=>{\r\n                _this.selectData()\r\n            }).catch(function (error) {\r\n            });\r\n        },\r\n        mounted() {\r\n            // this.columns = JSON.parse(localStorage.getItem(\"customColumn\"))\r\n            // this.$refs.table.tableData=[]\r\n            //this.getTableData()\r\n            //this.$refs.table.setTableHeight(600) //传给表格高度\r\n        },\r\n        methods: {\r\n            filterColumnByShow(list = []){\r\n                let showList = []\r\n                list.forEach(item=>{\r\n                    if(item.show.toString() === 'true'){\r\n                        showList.push(item)\r\n                    }\r\n                })\r\n                return showList\r\n            },\r\n            modifySet(obj){\r\n                console.log(obj);\r\n                this.columns =  this.filterColumnByShow(obj.columnsData)\r\n                this.tableSet = obj\r\n            },\r\n            getTableData:function(){ // 发送请求获取表格所有数据包括：列展示与不展示和表格配置信息\r\n\r\n            },\r\n            columnChange(obj){\r\n                // localStorage.setItem('customColumn',JSON.stringify(obj))\r\n            },\r\n            showDialog() {\r\n                this.dialogVisible = true\r\n                this.handleSelectionChange(this.columnsData)\r\n            },\r\n            toolbarClick(item,event){\r\n                if(item.title=='列表设置'){\r\n                    //this.dialogVisible = true\r\n\r\n                    this.setVisible = true\r\n                }\r\n            },\r\n            handleSelectionChange(val) { // 获取选中的列\r\n                let temp = [];\r\n                this.columnsData.forEach((item)=>{\r\n                    if(JSON.stringify(val).indexOf(JSON.stringify(item))>0){\r\n                        temp.push(item)\r\n                    }\r\n                })\r\n                this.multipleSelection = temp;\r\n            },\r\n            setBtn:function(){ // 表格设置项\r\n                this.dialogVisible = false\r\n                let setJson={}//需要的json串\r\n                if(!!this.multipleSelection&&this.multipleSelection.length>0){\r\n                    setJson.columns=this.multipleSelection //显示列\r\n                }\r\n                setJson.fontSize=this.fontSize //表格字体大小设置\r\n                setJson.size= this.pSize //默认每页显示多少条\r\n                setJson.tableName= this.tableName\r\n                setJson.tableWidthScale= this.tableWidthScale\r\n                this.dealWithData(setJson)\r\n            },\r\n            // 处理数据\r\n            dealWithData:function(obj){\r\n                if(!!obj.columns&&obj.columns.length>0) {\r\n                    this.columns = obj.columns\r\n                }\r\n                this.chooseSize=obj.fontSize\r\n                this.pagination.pageSize= obj.size\r\n                this.caption=obj.tableName\r\n                this.tableScale= parseInt(obj.tableWidthScale)\r\n            },\r\n            objectSpanMethod({ row, column, rowIndex, columnIndex }) {\r\n                if (columnIndex === 2) {\r\n                    if (rowIndex % 2 === 0) {\r\n                        return {\r\n                            rowspan: 2,\r\n                            colspan: 1\r\n                        };\r\n                    } else {\r\n                        return {\r\n                            rowspan: 0,\r\n                            colspan: 0\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            '$store.state.screenWidth'(newValue, oldValue) {\r\n                this.clientWidth = this.$el.clientWidth\r\n                //this.$refs.table\r\n            },\r\n            '$store.state.screenHeight'(newValue, oldValue) {\r\n                //let div1H = this.$refs.div1.offsetHeight\r\n                let div2H = parseInt(this.$refs.div2.offsetHeight)\r\n                let clientHeight = this.$store.state.contentHeight\r\n                console.info(div2H,clientHeight,clientHeight - div2H)\r\n                this.$refs.table.setTableHeight(clientHeight - div2H)\r\n\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .form-style,.el-dialog__body {\r\n        float: left;\r\n    }\r\n    .padd20{\r\n        padding: 20px 0;\r\n    }\r\n</style>"]}]}