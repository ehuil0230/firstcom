{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\informationManagement\\SelfEvaluationTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\hygl\\informationManagement\\SelfEvaluationTable.vue","mtime":1571466476382},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"SelfEvaluationTable\",\n    components: {},\n    data() {\n        return {\n            fenshu: 0,\n            wenzi: \"\",\n            wenzi1: \"\",\n            isIf: true,\n            //评分dialog\n            dialogVisible: false,\n            //进度dialog\n            dialogVisibledia: false,\n            //企业名称\n            comName:'',\n            //自评数据项\n            selfform: {\n                uuid: '',\n                registryPlaceCon: '',\n                isScale: \"\",\n                isServiceRange: \"\",\n                isCreditCon: \"\",\n                isHighTech: \"\",\n                isStandard: \"\",\n                researcherRatioDm: \"\",\n                researchCostaDm: \"\",\n                researchResultDm: \"\",\n            },\n            //后台返回 步骤条状态   用来显示那四个小球的：1表示第一个球，2表示第二个球，3第三个球，大于4第四个球\n            annualState: 1,\n            // 后台返回 用来控制自评表表示自评表的状态：0是可以随便保存修改，1是不可以修改\n            selfformState:{\n                state: '',\n            }\n        }\n    },\n    created() {\n        this.getComSelfcommentByAnnualId();\n        this.getName();\n        this.dialogVisibledia = true\n    },\n    methods: {\n        //保存\n        saveform: function () {\n            let that = this;\n            this.$$request({\n                url: this.$api.hyglApi.saveComSelfcomment,\n                data: Object.assign(this.selfform, {\n                    \"state\": \"0\",\n                    'uuid': this.selfform.uuid,\n                })\n            }).then(function (res) {\n                if (res.result === 1) {\n                    that.$message({\n                        type: \"success\",\n                        message: \"保存成功\"\n                    })\n                    that.$set(that.selfform,'uuid',res.info.uuid);\n                } else {\n                    that.$message({\n                        type: \"warning\",\n                        message: \"保存失败\"\n                    })\n                }\n            }).catch(function (error) {\n                that.$alert(error, \"系统异常，请联系管理员！\", {});\n            })\n        },\n        //评分\n        scoreform: function () {\n            if (this.selfform.isRegistryPlace == \"\" || this.selfform.isScale == \"\" || this.selfform.isServiceRange == \"\" ||\n                this.selfform.isCreditCon == \"\" || this.selfform.isHighTech == \"\" || this.selfform.isStandard == \"\" ||\n                this.selfform.researcherRatioDm == \"\" || this.selfform.researchCostaDm == \"\" || this.selfform.researchResultDm == \"\") {\n                alert(\"请全部选择完成再评分\");\n                return;\n            }\n            this.fenshu = 0;\n            switch (this.selfform.researcherRatioDm) {\n                case \"0\":\n                    this.fenshu = this.fenshu + 20;\n                    break;\n                case \"1\":\n                    this.fenshu = this.fenshu + 16;\n                    break;\n                case \"2\":\n                    this.fenshu = this.fenshu + 12;\n                    break;\n                case \"3\":\n                    this.fenshu = this.fenshu + 8;\n                    break;\n                case \"4\":\n                    this.fenshu = this.fenshu + 4;\n                    break;\n                case \"5\":\n                    this.fenshu = this.fenshu + 0;\n                    break;\n            }\n            switch (this.selfform.researchCostaDm) {\n                case \"0\":\n                    this.fenshu = this.fenshu + 50;\n                    break;\n                case \"1\":\n                    this.fenshu = this.fenshu + 40;\n                    break;\n                case \"2\":\n                    this.fenshu = this.fenshu + 30;\n                    break;\n                case \"3\":\n                    this.fenshu = this.fenshu + 20;\n                    break;\n                case \"4\":\n                    this.fenshu = this.fenshu + 10;\n                    break;\n                case \"5\":\n                    this.fenshu = this.fenshu + 0;\n                    break;\n                case \"6\":\n                    this.fenshu = this.fenshu + 50;\n                    break;\n                case \"7\":\n                    this.fenshu = this.fenshu + 40;\n                    break;\n                case \"8\":\n                    this.fenshu = this.fenshu + 30;\n                    break;\n                case \"9\":\n                    this.fenshu = this.fenshu + 20;\n                    break;\n                case \"10\":\n                    this.fenshu = this.fenshu + 10;\n                    break;\n                case \"11\":\n                    this.fenshu = this.fenshu + 0;\n                    break;\n            }\n            switch (this.selfform.researchResultDm) {\n                case \"0\":\n                    this.fenshu = this.fenshu + 30;\n                    break;\n                case \"1\":\n                    this.fenshu = this.fenshu + 24;\n                    break;\n                case \"2\":\n                    this.fenshu = this.fenshu + 18;\n                    break;\n                case \"3\":\n                    this.fenshu = this.fenshu + 12;\n                    break;\n                case \"4\":\n                    this.fenshu = this.fenshu + 6;\n                    break;\n                case \"5\":\n                    this.fenshu = this.fenshu + 0;\n                    break;\n            }\n            if (this.fenshu > 80) {\n                if (this.selfform.isRegistryPlace == \"Y\" && this.selfform.isScale == \"Y\" &&\n                    this.selfform.isServiceRange == \"Y\" && this.selfform.isCreditCon == \"Y\") {\n                    this.wenzi = \"\";\n                    this.wenzi1 = \"符合评分标准，请继续填报！\";\n                    this.isIf = false;\n                    this.dialogVisible = true;\n\n                    let that = this;\n                    this.$$request({\n                        url: this.$api.hyglApi.saveComSelfcomment,\n                        data: Object.assign(this.selfform, {\n                            'uuid': this.selfform.uuid,\n                            \"state\": \"1\"\n                        })\n                    }).then(function (res) {\n                        if (res.result === 1) {\n                            that.selfform.uuid = res.info.uuid;\n                        }\n                    }).catch(function (error) {\n                        that.$alert(error, \"系统异常，请联系管理员！\", {});\n                    })\n\n                    this.$$request({\n                        url: this.$api.hyglApi.changeComStatus,\n                        data: {\n                            state: '-1'\n                        }\n                    }).then(function (res) {\n                        if (res.result === 1) {\n\n                        } else {\n                            that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\n                        }\n                    }).catch(function (error) {\n                        that.$alert(error, \"系统异常，请联系管理员！\", {});\n                    })\n\n                    this.getComSelfcommentByAnnualId();\n\n                } else {\n                    this.wenzi1 = \"\";\n                    this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，基本准入条件不符合标准，不能填报企业信息！\";\n                    this.isIf = true;\n                    this.dialogVisible = true;\n                }\n            } else {\n                if (this.selfform.isRegistryPlace == \"Y\" && this.selfform.isScale == \"Y\" &&\n                    this.selfform.isServiceRange == \"Y\" && this.selfform.isCreditCon == \"Y\") {\n                    this.wenzi1 = \"\";\n                    this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，不符合评分标准，不能填报企业信息！\";\n                    this.isIf = true;\n                    this.dialogVisible = true;\n                } else {\n                    this.wenzi1 = \"\";\n                    this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，基本准入条件不符合标准，不能填报企业信息！\";\n                    this.isIf = true;\n                    this.dialogVisible = true;\n                }\n            }\n        },\n        //继续填报\n        keepOn() {\n            this.$router.push({\n                name: 'InformationReporting',\n                query: {}\n            })\n        },\n\n        getComSelfcommentByAnnualId() {\n            let that = this;\n            //自评表进入调用查询接口\n            this.$$request({\n                url: this.$api.hyglApi.getComSelfcommentByAnnualId,\n                data: {}\n            }).then(function (res) {\n                if (res.info != null) {\n                    that.selfform.isRegistryPlace = res.info.isRegistryPlace;\n                    that.selfform.isScale = res.info.isScale;\n                    that.selfform.isServiceRange = res.info.isServiceRange;\n                    that.selfform.isCreditCon = res.info.isCreditCon;\n                    that.selfform.isHighTech = res.info.isHighTech;\n                    that.selfform.isStandard = res.info.isStandard;\n                    that.selfform.researcherRatioDm = res.info.researcherRatioDm;\n                    that.selfform.researchCostaDm = res.info.researchCostaDm;\n                    that.selfform.researchResultDm = res.info.researchResultDm;\n                    that.selfform.uuid = res.info.uuid;\n                    that.annualState = res.info.annualState;\n                    that.$set(that.selfformState,'state',res.info.state)\n                }\n            })\n        },\n        //获取企业名称\n        getName(){\n            let that = this;\n            this.$$request({\n                url: this.$api.hyglApi.getComName,\n                data: {}\n            }).then(function (res) {\n                if (res.result === 1) {\n                    if(res.info.comName){\n                        that.comName = res.info.comName;\n                    }else {\n                        that.comName = '';\n                    }\n                }else{\n                    that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\n                    return false;\n                }\n            }).catch(function (error) {\n                that.$alert(error, \"系统异常，请联系管理员！\", {});\n                return false;\n            })\n        },\n    }\n}\n",{"version":3,"sources":["SelfEvaluationTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelfEvaluationTable.vue","sourceRoot":"src/views/hygl/informationManagement","sourcesContent":["<!--自评表-->\r\n<template>\r\n    <div class=\"self_main\">\r\n        <div class=\"demo-input-suffix\">\r\n            <div class=\"si\">企业自评表</div>\r\n            <div class=\"si1\">企业名称：{{comName}}</div>\r\n        </div>\r\n        <el-form ref=\"selfform\" :model=\"selfform\" label-width=\"80px\">\r\n            <span style=\"display: inline;font-size: large; margin-left: 30px;\">一、基本准入条件判定</span>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">1、注册地：企业为在中国境内（不包括港、澳、台地区）注册的居民企业。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isRegistryPlace\">\r\n                        <el-radio label=\"Y\">符合</el-radio>\r\n                        <el-radio label=\"N\">不符合</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">2、企业规模：企业职工总数不超过500人、年销售收入不超过2亿元、资产总额不超过2亿元。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isScale\">\r\n                         <el-radio label=\"Y\">符合</el-radio>\r\n                         <el-radio label=\"N\">不符合</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">3、产品及服务范围：企业提供的产品和服务不属于国家规定的禁止、限制和淘汰类。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isServiceRange\">\r\n                        <el-radio label=\"Y\">符合</el-radio>\r\n                        <el-radio label=\"N\">不符合</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">4、企业信用：企业在填报上一年及当年内未发生重大安全、重大质量事故和严重环境违法、科研严重失信行为，且企业未列入经营异常名录和严重违法失信企业名单。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isCreditCon\">\r\n                        <el-radio label=\"Y\">符合</el-radio>\r\n                        <el-radio label=\"N\">不符合</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <span style=\"display: inline;font-size: large; margin-left: 30px;\">二、相关重要条件判定</span>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">5、高新技术企业：企业拥有有效期内高新技术企业资格证书。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isHighTech\">\r\n                        <el-radio label=\"Y\">是</el-radio>\r\n                        <el-radio label=\"N\">否</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">6、制定标准：企业近五年内主导制定过国际标准、国家标准、或行业标准。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                     <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.isStandard\">\r\n                        <el-radio label=\"Y\">是</el-radio>\r\n                        <el-radio label=\"N\">否</el-radio>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <span style=\"display: inline;font-size: large; margin-left: 30px;\">三、企业科技活动评分</span>\r\n            <el-form-item class=\"top\">\r\n                <span style=\"display: inline;\">7、科技人员：上一会计年度企业科技人员占企业职工总数的比例。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                      <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.researcherRatioDm\">\r\n                           <table>\r\n                              <tr>\r\n                                  <td><el-radio label=\"0\">30%（含）- 以上(20分)</el-radio></td>\r\n                                  <td><el-radio label=\"1\">25%（含）- 30%(16分)</el-radio></td>\r\n                                  <td><el-radio label=\"2\">20%（含）- 25%(12分)</el-radio></td>\r\n                              </tr>\r\n                               <tr>\r\n                                   <td><el-radio label=\"3\">15%（含）- 20%(8分)</el-radio></td>\r\n                                   <td><el-radio label=\"4\">10%（含）- 15%(4分)</el-radio></td>\r\n                                   <td><el-radio label=\"5\">10%以下（0分）</el-radio></td>\r\n                              </tr>\r\n                          </table>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <span style=\"display: inline;\">8、研发投入（企业从（1）、（2）两项指标中选择一个指标进行评分）</span>\r\n                <br>\r\n                <span class=\"zt1\">\r\n                    <span style=\"display: inline;\">（1）上一会计年度企业研发费用总额占销售收入总额的比例。</span>\r\n                    <!-- -->\r\n                    <table style=\"margin-left: 50px;line-height: 1px\">\r\n                        <tr>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"0\">30%（含）- 以上(50分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"1\">25%（含）- 30%(40分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"2\">20%（含）- 25%(30分)</el-radio></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"3\">15%（含）- 20%(20分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"4\">10%（含）- 15%(10分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"5\">10%以下（0分）</el-radio></td>\r\n                        </tr>\r\n                    </table>\r\n                    <span style=\"display: inline;\">（2）上一会计年度企业研发费用总额占成本费用支出总额的比例。</span>\r\n                    <!--:disabled=\"selfformState.state===1\" -->\r\n                    <table style=\"margin-left: 50px;line-height: 1px\">\r\n                        <tr>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"6\">30%（含）- 以上(50分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"7\">25%（含）- 30%(40分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"8\">20%（含）- 25%(30分)</el-radio></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"9\">15%（含）- 20%(20分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"10\">10%（含）- 15%(10分)</el-radio></td>\r\n                            <td><el-radio :disabled=\"selfformState.state===1\" v-model=\"selfform.researchCostaDm\" label=\"11\">10%以下（0分）</el-radio></td>\r\n                        </tr>\r\n                    </table>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <span style=\"display: inline;\">9、科技成果：企业拥有的在有效期内的主要产品（或服务）相关的知识产权类别和数量（知识产权应没有争议或纠纷）。</span>\r\n                <br>\r\n                <span class=\"zt\">\r\n                      <el-radio-group :disabled=\"selfformState.state===1\" v-model=\"selfform.researchResultDm\">\r\n                          <table>\r\n                              <tr>\r\n                                  <td><el-radio label=\"0\">1项及以上Ⅰ类知识产权（30分）</el-radio></td>\r\n                                  <td><el-radio label=\"1\">4项及以上Ⅱ类知识产权（24分）</el-radio></td>\r\n                                  <td><el-radio label=\"2\">3项及以上Ⅱ类知识产权（18分）</el-radio></td>\r\n                              </tr>\r\n                               <tr>\r\n                                  <td><el-radio label=\"3\">2项及以上Ⅱ类知识产权（12分）</el-radio></td>\r\n                                  <td><el-radio label=\"4\">1项及以上Ⅱ类知识产权（6分）</el-radio></td>\r\n                                  <td><el-radio label=\"5\">没有知识产权（0分）</el-radio></td>\r\n                              </tr>\r\n                          </table>\r\n                     </el-radio-group>\r\n                </span>\r\n            </el-form-item>\r\n            <el-form-item class=\"btnwz\">\r\n                <el-button type=\"primary\" :disabled=\"selfformState.state===1\" @click=\"saveform\" class=\"btn1\">保存</el-button>\r\n                <el-button type=\"primary\" :disabled=\"selfformState.state===1\" @click=\"scoreform\" class=\"btn1\">评分</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <div id=\"dialog1\">\r\n            <el-dialog v-if=\"dialogVisible\"\r\n                       title=\"评分结果\"\r\n                       :visible.sync=\"dialogVisible\"\r\n                       width=\"30%\" class=\"diaheight\">\r\n                <span class=\"pfwzz\">本次自评分数</span>\r\n                <div class=\"pfwz1\"> {{fenshu}}</div>\r\n                <div class=\"pfwz2\"> {{wenzi}}</div>\r\n                <div class=\"pfwz3\"> {{wenzi1}}</div>\r\n                <div class=\"pfbtn\">\r\n                    <el-button type=\"primary\" @click=\"dialogVisible=false\">返回首页</el-button>\r\n                    <el-button type=\"primary\" :disabled=\"isIf\" @click=\"keepOn\">继续填报</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </div>\r\n\r\n        <el-dialog\r\n                v-if=\"dialogVisibledia\"\r\n                title=\"进度\"\r\n                :visible.sync=\"dialogVisibledia\"\r\n                width=\"30%\">\r\n            <el-steps :active=\"annualState\">\r\n                <el-step title=\"自评\" icon=\"el-icon-edit\"></el-step>\r\n                <el-step title=\"填报\" icon=\"el-icon-upload\"></el-step>\r\n                <el-step title=\"受理\" icon=\"el-icon-picture\"></el-step>\r\n                <el-step title=\"审核\" icon=\"el-icon-picture\"></el-step>\r\n            </el-steps>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: \"SelfEvaluationTable\",\r\n        components: {},\r\n        data() {\r\n            return {\r\n                fenshu: 0,\r\n                wenzi: \"\",\r\n                wenzi1: \"\",\r\n                isIf: true,\r\n                //评分dialog\r\n                dialogVisible: false,\r\n                //进度dialog\r\n                dialogVisibledia: false,\r\n                //企业名称\r\n                comName:'',\r\n                //自评数据项\r\n                selfform: {\r\n                    uuid: '',\r\n                    registryPlaceCon: '',\r\n                    isScale: \"\",\r\n                    isServiceRange: \"\",\r\n                    isCreditCon: \"\",\r\n                    isHighTech: \"\",\r\n                    isStandard: \"\",\r\n                    researcherRatioDm: \"\",\r\n                    researchCostaDm: \"\",\r\n                    researchResultDm: \"\",\r\n                },\r\n                //后台返回 步骤条状态   用来显示那四个小球的：1表示第一个球，2表示第二个球，3第三个球，大于4第四个球\r\n                annualState: 1,\r\n                // 后台返回 用来控制自评表表示自评表的状态：0是可以随便保存修改，1是不可以修改\r\n                selfformState:{\r\n                    state: '',\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.getComSelfcommentByAnnualId();\r\n            this.getName();\r\n            this.dialogVisibledia = true\r\n        },\r\n        methods: {\r\n            //保存\r\n            saveform: function () {\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.saveComSelfcomment,\r\n                    data: Object.assign(this.selfform, {\r\n                        \"state\": \"0\",\r\n                        'uuid': this.selfform.uuid,\r\n                    })\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        that.$message({\r\n                            type: \"success\",\r\n                            message: \"保存成功\"\r\n                        })\r\n                        that.$set(that.selfform,'uuid',res.info.uuid);\r\n                    } else {\r\n                        that.$message({\r\n                            type: \"warning\",\r\n                            message: \"保存失败\"\r\n                        })\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                })\r\n            },\r\n            //评分\r\n            scoreform: function () {\r\n                if (this.selfform.isRegistryPlace == \"\" || this.selfform.isScale == \"\" || this.selfform.isServiceRange == \"\" ||\r\n                    this.selfform.isCreditCon == \"\" || this.selfform.isHighTech == \"\" || this.selfform.isStandard == \"\" ||\r\n                    this.selfform.researcherRatioDm == \"\" || this.selfform.researchCostaDm == \"\" || this.selfform.researchResultDm == \"\") {\r\n                    alert(\"请全部选择完成再评分\");\r\n                    return;\r\n                }\r\n                this.fenshu = 0;\r\n                switch (this.selfform.researcherRatioDm) {\r\n                    case \"0\":\r\n                        this.fenshu = this.fenshu + 20;\r\n                        break;\r\n                    case \"1\":\r\n                        this.fenshu = this.fenshu + 16;\r\n                        break;\r\n                    case \"2\":\r\n                        this.fenshu = this.fenshu + 12;\r\n                        break;\r\n                    case \"3\":\r\n                        this.fenshu = this.fenshu + 8;\r\n                        break;\r\n                    case \"4\":\r\n                        this.fenshu = this.fenshu + 4;\r\n                        break;\r\n                    case \"5\":\r\n                        this.fenshu = this.fenshu + 0;\r\n                        break;\r\n                }\r\n                switch (this.selfform.researchCostaDm) {\r\n                    case \"0\":\r\n                        this.fenshu = this.fenshu + 50;\r\n                        break;\r\n                    case \"1\":\r\n                        this.fenshu = this.fenshu + 40;\r\n                        break;\r\n                    case \"2\":\r\n                        this.fenshu = this.fenshu + 30;\r\n                        break;\r\n                    case \"3\":\r\n                        this.fenshu = this.fenshu + 20;\r\n                        break;\r\n                    case \"4\":\r\n                        this.fenshu = this.fenshu + 10;\r\n                        break;\r\n                    case \"5\":\r\n                        this.fenshu = this.fenshu + 0;\r\n                        break;\r\n                    case \"6\":\r\n                        this.fenshu = this.fenshu + 50;\r\n                        break;\r\n                    case \"7\":\r\n                        this.fenshu = this.fenshu + 40;\r\n                        break;\r\n                    case \"8\":\r\n                        this.fenshu = this.fenshu + 30;\r\n                        break;\r\n                    case \"9\":\r\n                        this.fenshu = this.fenshu + 20;\r\n                        break;\r\n                    case \"10\":\r\n                        this.fenshu = this.fenshu + 10;\r\n                        break;\r\n                    case \"11\":\r\n                        this.fenshu = this.fenshu + 0;\r\n                        break;\r\n                }\r\n                switch (this.selfform.researchResultDm) {\r\n                    case \"0\":\r\n                        this.fenshu = this.fenshu + 30;\r\n                        break;\r\n                    case \"1\":\r\n                        this.fenshu = this.fenshu + 24;\r\n                        break;\r\n                    case \"2\":\r\n                        this.fenshu = this.fenshu + 18;\r\n                        break;\r\n                    case \"3\":\r\n                        this.fenshu = this.fenshu + 12;\r\n                        break;\r\n                    case \"4\":\r\n                        this.fenshu = this.fenshu + 6;\r\n                        break;\r\n                    case \"5\":\r\n                        this.fenshu = this.fenshu + 0;\r\n                        break;\r\n                }\r\n                if (this.fenshu > 80) {\r\n                    if (this.selfform.isRegistryPlace == \"Y\" && this.selfform.isScale == \"Y\" &&\r\n                        this.selfform.isServiceRange == \"Y\" && this.selfform.isCreditCon == \"Y\") {\r\n                        this.wenzi = \"\";\r\n                        this.wenzi1 = \"符合评分标准，请继续填报！\";\r\n                        this.isIf = false;\r\n                        this.dialogVisible = true;\r\n\r\n                        let that = this;\r\n                        this.$$request({\r\n                            url: this.$api.hyglApi.saveComSelfcomment,\r\n                            data: Object.assign(this.selfform, {\r\n                                'uuid': this.selfform.uuid,\r\n                                \"state\": \"1\"\r\n                            })\r\n                        }).then(function (res) {\r\n                            if (res.result === 1) {\r\n                                that.selfform.uuid = res.info.uuid;\r\n                            }\r\n                        }).catch(function (error) {\r\n                            that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                        })\r\n\r\n                        this.$$request({\r\n                            url: this.$api.hyglApi.changeComStatus,\r\n                            data: {\r\n                                state: '-1'\r\n                            }\r\n                        }).then(function (res) {\r\n                            if (res.result === 1) {\r\n\r\n                            } else {\r\n                                that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\r\n                            }\r\n                        }).catch(function (error) {\r\n                            that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                        })\r\n\r\n                        this.getComSelfcommentByAnnualId();\r\n\r\n                    } else {\r\n                        this.wenzi1 = \"\";\r\n                        this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，基本准入条件不符合标准，不能填报企业信息！\";\r\n                        this.isIf = true;\r\n                        this.dialogVisible = true;\r\n                    }\r\n                } else {\r\n                    if (this.selfform.isRegistryPlace == \"Y\" && this.selfform.isScale == \"Y\" &&\r\n                        this.selfform.isServiceRange == \"Y\" && this.selfform.isCreditCon == \"Y\") {\r\n                        this.wenzi1 = \"\";\r\n                        this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，不符合评分标准，不能填报企业信息！\";\r\n                        this.isIf = true;\r\n                        this.dialogVisible = true;\r\n                    } else {\r\n                        this.wenzi1 = \"\";\r\n                        this.wenzi = \" 您参与的自评结果为：\" + this.fenshu + \"分，基本准入条件不符合标准，不能填报企业信息！\";\r\n                        this.isIf = true;\r\n                        this.dialogVisible = true;\r\n                    }\r\n                }\r\n            },\r\n            //继续填报\r\n            keepOn() {\r\n                this.$router.push({\r\n                    name: 'InformationReporting',\r\n                    query: {}\r\n                })\r\n            },\r\n\r\n            getComSelfcommentByAnnualId() {\r\n                let that = this;\r\n                //自评表进入调用查询接口\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.getComSelfcommentByAnnualId,\r\n                    data: {}\r\n                }).then(function (res) {\r\n                    if (res.info != null) {\r\n                        that.selfform.isRegistryPlace = res.info.isRegistryPlace;\r\n                        that.selfform.isScale = res.info.isScale;\r\n                        that.selfform.isServiceRange = res.info.isServiceRange;\r\n                        that.selfform.isCreditCon = res.info.isCreditCon;\r\n                        that.selfform.isHighTech = res.info.isHighTech;\r\n                        that.selfform.isStandard = res.info.isStandard;\r\n                        that.selfform.researcherRatioDm = res.info.researcherRatioDm;\r\n                        that.selfform.researchCostaDm = res.info.researchCostaDm;\r\n                        that.selfform.researchResultDm = res.info.researchResultDm;\r\n                        that.selfform.uuid = res.info.uuid;\r\n                        that.annualState = res.info.annualState;\r\n                        that.$set(that.selfformState,'state',res.info.state)\r\n                    }\r\n                })\r\n            },\r\n            //获取企业名称\r\n            getName(){\r\n                let that = this;\r\n                this.$$request({\r\n                    url: this.$api.hyglApi.getComName,\r\n                    data: {}\r\n                }).then(function (res) {\r\n                    if (res.result === 1) {\r\n                        if(res.info.comName){\r\n                            that.comName = res.info.comName;\r\n                        }else {\r\n                            that.comName = '';\r\n                        }\r\n                    }else{\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\r\n                        return false;\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                    return false;\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .self_main {\r\n        width: 800px;\r\n        height: 500px;\r\n    }\r\n\r\n    .zt {\r\n        display: inline;\r\n        padding-bottom: -30px;\r\n        margin-left: 50px;\r\n    }\r\n\r\n    .zt1 {\r\n        display: inline;\r\n    }\r\n\r\n    .si {\r\n        font-size: 30px;\r\n        margin-left: 350px;\r\n        font-family: STSong;\r\n    }\r\n\r\n    .si1 {\r\n        font-size: 15px;\r\n        margin-left: 350px;\r\n        font-family: STSong;\r\n    }\r\n\r\n    .btnwz {\r\n        margin-top: 20px;\r\n        padding-bottom: 20px;\r\n        text-align: center;\r\n    }\r\n\r\n    .top {\r\n        margin-bottom: -10px;\r\n    }\r\n\r\n    .btn1 {\r\n        width: 100px;\r\n        height: 40px;\r\n\r\n    }\r\n\r\n    #dialog1 >>> .el-dialog .el-dialog__body{\r\n        text-align: center;\r\n    }\r\n\r\n    .self_main >>> .el-form-item {\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .pfwzz {\r\n        font-size: 24px;\r\n    }\r\n\r\n    .pfbtn {\r\n        margin: 30px auto 10px auto;\r\n    }\r\n\r\n    .pfwz1 {\r\n        font-size: 40px;\r\n    }\r\n\r\n    .diaheight {\r\n        height: 500px;\r\n    }\r\n\r\n</style>\r\n"]}]}