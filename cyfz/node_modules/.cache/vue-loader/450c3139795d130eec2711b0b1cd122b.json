{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\components\\grid\\TableSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\components\\grid\\TableSet.vue","mtime":1568987312115},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport tableList from '../../components/grid/TableList.vue';\nexport default {\n    name: \"TableSet\",\n    components:{\n        tableList\n    },\n    props:{\n        tableSet:{\n            type: Object,\n            default: {}\n        },\n        setVisible:{\n            type: Boolean,\n            default: false\n        }\n    },\n    data(){\n        return {\n            test:\"\",\n            columnsData:[],\n            checkedData:[],\n            set:{},\n            getDataWay:{dataType:\"data\",data:[]},\n            columns :[{\n                \"label\": \"列名\",\n                \"prop\": \"label\"\n            },{\n                \"label\": \"默认排序\",\n                \"prop\": \"sort\",\n                \"template\":true\n            }\n            ],\n            fontSizes:['大','中','小'], //表格字体大小设置,\n\n        }\n    },\n    created(){\n        this.columnsData = this.tableSet.columnsData || []\n        this.set = JSON.parse(JSON.stringify(this.tableSet.set))\n        this.getDataWay.data = this.columnsData || []\n        this.columnsData.forEach(item=>{\n            if (item.show){\n                this.checkedData.push(item)\n            }\n        })\n    },\n    mounted() {\n\n    },\n    methods:{\n        orderFun(obj1,obj2){\n            this.$set(this.set.defaultSort,'prop',obj1.prop)\n            this.$set(this.set.defaultSort,'order',obj2)\n            this.$refs.table.loadData()\n            //this.set.defaultSort.prop=obj1.prop;\n            //this.set.defaultSort.order=obj2\n        },\n        resetForm(){\n            this.$emit(\"resetDefault\")\n        },\n        handleSelectionChange(val) { // 获取选中的列\n            let temp = [];\n            this.columnsData.forEach((item)=>{\n                if(JSON.stringify(val).indexOf(JSON.stringify(item))>0){\n                    item.show = true\n                    temp.push(item)\n                }else{\n                    item.show = false\n                }\n            })\n            this.checkedData = temp;\n        },\n        beforeClose(done){\n            this.$emit('update:setVisible', false);\n            done()\n        },\n        confirm(){\n            let result = {set:this.set,columnsData:this.columnsData}\n            this.$emit(\"modifySet\",result)\n            this.$emit('update:setVisible', false);\n        },\n        cancel(){\n            this.$emit('update:setVisible', false);\n        }\n    }\n}\n",{"version":3,"sources":["TableSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableSet.vue","sourceRoot":"src/components/grid","sourcesContent":["<template>\r\n    <div>\r\n        <el-dialog class=\"tableSet\"\r\n                   title=\"列表设置\"\r\n                   :visible=\"setVisible\"\r\n                   :before-close=\"beforeClose\"\r\n                   :close-on-click-modal=\"false\"\r\n                   v-dialogDrag=\"true\"\r\n                   width=\"50%\">   <!--peiyan 添加:close-on-click-modal&v-dialogDrag   dirlog拖动 -->\r\n            <tableList ref=\"table\"\r\n                       :getDataWay=\"getDataWay\"\r\n                       :columns=\"columns\"\r\n                       :index=\"true\"\r\n                       :checkedData=\"checkedData\"\r\n                       selection\r\n                       @handleSelectionChange=\"handleSelectionChange\"\r\n            >\r\n                <el-table-column  label=\"默认排序\" slot=\"sort\" width=\"120\">\r\n                    <template v-slot=\"scope\">\r\n                       <!-- <el-radio v-model=\"set.defaultSort.prop\" :label=\"scope.row.prop\">{{\"\"}}</el-radio>-->\r\n                        <el-button size=\"mini\" type=\"text\" :disabled=\"((set.defaultSort.prop === scope.row.prop)&&(set.defaultSort.order === 'asc'))\" @click.stop=\"orderFun(scope.row,'asc')\">升序</el-button>\r\n                        <el-button size=\"mini\" type=\"text\" :disabled=\"((set.defaultSort.prop === scope.row.prop)&&(set.defaultSort.order === 'desc'))\" @click.stop=\"orderFun(scope.row,'desc')\">降序</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </tableList>\r\n            <el-form ref=\"form\" label-width=\"120px\" size=\"mini\" class=\"form-style\">\r\n                <div class=\"el-dialog__title padd20\">显示设置</div>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"表格标题\">\r\n                        <el-input v-model=\"set.caption\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"表格放大(%)\">\r\n                        <el-input v-model=\"set.tableScale\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"字体大小\" :span=\"12\">\r\n                        <el-select v-model=\"set.tableSize\" placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"(item, index) in fontSizes\"\r\n                                    :key=\"index\"\r\n                                    :label=\"item\"\r\n                                    :value=\"item\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"默认显示条数\">\r\n                        <el-select v-model=\"set.pageSize\" placeholder=\"请选择\">\r\n                            <el-option\r\n                                    v-for=\"(item, index) in set.pageSizes\"\r\n                                    :key=\"index\"\r\n                                    :label=\"item\"\r\n                                    :value=\"item\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"cancel\">取 消</el-button>\r\n                <el-button @click=\"resetForm\">恢复默认设置</el-button>\r\n                <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import tableList from '../../components/grid/TableList.vue';\r\n    export default {\r\n        name: \"TableSet\",\r\n        components:{\r\n            tableList\r\n        },\r\n        props:{\r\n            tableSet:{\r\n                type: Object,\r\n                default: {}\r\n            },\r\n            setVisible:{\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                test:\"\",\r\n                columnsData:[],\r\n                checkedData:[],\r\n                set:{},\r\n                getDataWay:{dataType:\"data\",data:[]},\r\n                columns :[{\r\n                    \"label\": \"列名\",\r\n                    \"prop\": \"label\"\r\n                },{\r\n                    \"label\": \"默认排序\",\r\n                    \"prop\": \"sort\",\r\n                    \"template\":true\r\n                }\r\n                ],\r\n                fontSizes:['大','中','小'], //表格字体大小设置,\r\n\r\n            }\r\n        },\r\n        created(){\r\n            this.columnsData = this.tableSet.columnsData || []\r\n            this.set = JSON.parse(JSON.stringify(this.tableSet.set))\r\n            this.getDataWay.data = this.columnsData || []\r\n            this.columnsData.forEach(item=>{\r\n                if (item.show){\r\n                    this.checkedData.push(item)\r\n                }\r\n            })\r\n        },\r\n        mounted() {\r\n\r\n        },\r\n        methods:{\r\n            orderFun(obj1,obj2){\r\n                this.$set(this.set.defaultSort,'prop',obj1.prop)\r\n                this.$set(this.set.defaultSort,'order',obj2)\r\n                this.$refs.table.loadData()\r\n                //this.set.defaultSort.prop=obj1.prop;\r\n                //this.set.defaultSort.order=obj2\r\n            },\r\n            resetForm(){\r\n                this.$emit(\"resetDefault\")\r\n            },\r\n            handleSelectionChange(val) { // 获取选中的列\r\n                let temp = [];\r\n                this.columnsData.forEach((item)=>{\r\n                    if(JSON.stringify(val).indexOf(JSON.stringify(item))>0){\r\n                        item.show = true\r\n                        temp.push(item)\r\n                    }else{\r\n                        item.show = false\r\n                    }\r\n                })\r\n                this.checkedData = temp;\r\n            },\r\n            beforeClose(done){\r\n                this.$emit('update:setVisible', false);\r\n                done()\r\n            },\r\n            confirm(){\r\n                let result = {set:this.set,columnsData:this.columnsData}\r\n                this.$emit(\"modifySet\",result)\r\n                this.$emit('update:setVisible', false);\r\n            },\r\n            cancel(){\r\n                this.$emit('update:setVisible', false);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .tableSet >>> .el-dialog{\r\n        min-width: 500px;\r\n    }\r\n    .tableSet >>> .el-dialog .el-select{\r\n        width: 100%;\r\n    }\r\n    /*.tableSet >>> .el-dialog .el-table__header .el-checkbox::after{*/\r\n    /*    content: \"显示\";*/\r\n    /*}*/\r\n    .tableSet >>> .el-dialog .el-table-column--selection{\r\n        text-align: center;\r\n    }\r\n</style>"]}]}