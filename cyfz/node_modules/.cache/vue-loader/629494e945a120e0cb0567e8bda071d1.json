{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\cyfx\\czsyfx\\gssyfx.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\cyfx\\czsyfx\\gssyfx.vue","mtime":1571748931833},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Piechart from \"@/components/echarts/Piechart\";\nimport LineChart from \"@/components/echarts/LineChart\";\nimport Histogram from \"@/components/echarts/Histogram\";\n\nexport default {\n    name: \"gssyfx\",\n    components: {\n        Piechart,\n        LineChart,\n        Histogram\n    },\n    data() {\n        return {\n            //110000\n            cityName: '2',\n            cityNameList: [],//城市名字下拉选数据\n            tableData: [],//表格数据\n            year: '',\n            pieChartData: {\n                text: '重点方向收入占比',\n                subtext: (new Date().getFullYear()-1).toString()+'年',\n                titleSize: 16,\n                download: true,\n                data:[],\n                danwei:'万元',\n            },\n            lineChartData: {\n                text: '重点方向分析',\n                titleSize: 16,\n                download: true,\n                data:[]\n            },\n            histogramData: {\n                color: ['#70b8ff'],\n                params: '',\n                showNumber: false,\n                rotate: [60],\n                yName:'(万元)',\n                data:[]\n            }\n        }\n    },\n    created() {\n        //获取年份\n        this.year = (new Date().getFullYear()-1).toString();\n        //获取数据\n        this.getData();\n    },\n    methods: {\n        getData(){\n            let that = this;\n            this.$$request({\n                // url: 'http://mockjs.com/api/getChanzhishouyi',\n                url: this.$api.cyfxApi.queryIndustryProfitResult,\n                data: {\n                    provinceDm: this.cityName\n                }\n            }).then(function (res) {\n                if(res.result === 1){\n                    that.pieChartData.data = res.info.pie.data;\n                    that.lineChartData.data = res.info.lineChart.data;\n                    that.histogramData.data = res.info.histogram.data;\n                    that.cityNameList = res.info.province;\n                    that.tableData = [];\n\n                    //判断返回数据的长度是否大于5\n                    let listlength= res.info.list.data.length;\n                    if (listlength>5){\n                        listlength=5;\n                    }\n\n                    for (let i = 0; i < listlength; i++) {\n                        let obj = {\n                            num: 0,\n                            city: '',\n                            money: '',\n                        }\n                        obj.num = i+1;\n                        obj.city = res.info.list.data[i].company;\n                        obj.money = res.info.list.data[i].annualSales;\n                        that.tableData.push(obj);\n                    }\n                }else{\n                    that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\n                    return false;\n                }\n            }).catch(function (error) {\n                that.$alert(error, \"系统异常，请联系管理员！\", {});\n                return false;\n            });\n        }\n    },\n    watch: {\n        cityName: function (val) {\n            this.getData();\n        }\n    }\n}\n",{"version":3,"sources":["gssyfx.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gssyfx.vue","sourceRoot":"src/views/cyfx/czsyfx","sourcesContent":["<!--各省收益分析-->\r\n<template>\r\n    <div id=\"qgsyfx\">\r\n        <div class=\"qgsyfx_sm\">\r\n            <div style=\"width: 100%; height: 41px;margin: 10px;padding-left:600px\">\r\n                选择省份：\r\n                <el-select v-model=\"cityName\" placeholder=\"\">\r\n                    <el-option v-for=\"item in cityNameList\" :label=\"item.CAPTION\"\r\n                               :value=\"item.CODE\"></el-option>\r\n                </el-select>\r\n            </div>\r\n            <div class=\"zdfxzb_title\">\r\n                <i></i>\r\n                <span>重点方向占比图及趋势</span>\r\n            </div>\r\n            <div class=\"zdfxzb_charts\">\r\n                <Piechart style=\"width: 100%;height: 50%; float: left\"\r\n                          :PieChart=\"pieChartData\">\r\n                </Piechart>\r\n                <LineChart style=\"width: 100%;height: 50%;float: left\"\r\n                           :LineChartData=\"lineChartData\">\r\n                </LineChart>\r\n            </div>\r\n            <div class=\"zdfxzb_title\">\r\n                <i></i>\r\n                <span>揭榜方向分析图</span>\r\n            </div>\r\n            <div class=\"fangxiangtu\">\r\n                <div class=\"city_selected\">\r\n                    <div style=\"width: 100%;height: 100%;\">\r\n                        <Histogram style=\"width: 100%; height: 100%\"\r\n                                   :HistogramData=\"histogramData\">\r\n                        </Histogram>\r\n                    </div>\r\n                </div>\r\n                <div class=\"jbfxt_charts\">\r\n                    <div class=\"jb_table\">\r\n                        <p>企业收入排名TOP5（时间：{{year}}年）</p>\r\n                        <el-table\r\n                                :data=\"tableData\"\r\n                                :row-style=\"{height:'40px'}\"\r\n                                :cell-style=\"{padding:'0px'}\"\r\n                                border\r\n                                style=\"width: 90%!important;margin: 40px auto 30px auto\">\r\n                            <el-table-column prop=\"num\" label=\"排名\" width=\"50\"></el-table-column>\r\n                            <el-table-column :show-overflow-tooltip=\"true\" prop=\"city\" label=\"企业\" width=\"150\"></el-table-column>\r\n                            <el-table-column :show-overflow-tooltip=\"true\" prop=\"money\" label=\"产业收入（万元）\"></el-table-column>\r\n                        </el-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Piechart from \"@/components/echarts/Piechart\";\r\n    import LineChart from \"@/components/echarts/LineChart\";\r\n    import Histogram from \"@/components/echarts/Histogram\";\r\n\r\n    export default {\r\n        name: \"gssyfx\",\r\n        components: {\r\n            Piechart,\r\n            LineChart,\r\n            Histogram\r\n        },\r\n        data() {\r\n            return {\r\n                //110000\r\n                cityName: '2',\r\n                cityNameList: [],//城市名字下拉选数据\r\n                tableData: [],//表格数据\r\n                year: '',\r\n                pieChartData: {\r\n                    text: '重点方向收入占比',\r\n                    subtext: (new Date().getFullYear()-1).toString()+'年',\r\n                    titleSize: 16,\r\n                    download: true,\r\n                    data:[],\r\n                    danwei:'万元',\r\n                },\r\n                lineChartData: {\r\n                    text: '重点方向分析',\r\n                    titleSize: 16,\r\n                    download: true,\r\n                    data:[]\r\n                },\r\n                histogramData: {\r\n                    color: ['#70b8ff'],\r\n                    params: '',\r\n                    showNumber: false,\r\n                    rotate: [60],\r\n                    yName:'(万元)',\r\n                    data:[]\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            //获取年份\r\n            this.year = (new Date().getFullYear()-1).toString();\r\n            //获取数据\r\n            this.getData();\r\n        },\r\n        methods: {\r\n            getData(){\r\n                let that = this;\r\n                this.$$request({\r\n                    // url: 'http://mockjs.com/api/getChanzhishouyi',\r\n                    url: this.$api.cyfxApi.queryIndustryProfitResult,\r\n                    data: {\r\n                        provinceDm: this.cityName\r\n                    }\r\n                }).then(function (res) {\r\n                    if(res.result === 1){\r\n                        that.pieChartData.data = res.info.pie.data;\r\n                        that.lineChartData.data = res.info.lineChart.data;\r\n                        that.histogramData.data = res.info.histogram.data;\r\n                        that.cityNameList = res.info.province;\r\n                        that.tableData = [];\r\n\r\n                        //判断返回数据的长度是否大于5\r\n                        let listlength= res.info.list.data.length;\r\n                        if (listlength>5){\r\n                            listlength=5;\r\n                        }\r\n\r\n                        for (let i = 0; i < listlength; i++) {\r\n                            let obj = {\r\n                                num: 0,\r\n                                city: '',\r\n                                money: '',\r\n                            }\r\n                            obj.num = i+1;\r\n                            obj.city = res.info.list.data[i].company;\r\n                            obj.money = res.info.list.data[i].annualSales;\r\n                            that.tableData.push(obj);\r\n                        }\r\n                    }else{\r\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {});\r\n                        return false;\r\n                    }\r\n                }).catch(function (error) {\r\n                    that.$alert(error, \"系统异常，请联系管理员！\", {});\r\n                    return false;\r\n                });\r\n            }\r\n        },\r\n        watch: {\r\n            cityName: function (val) {\r\n                this.getData();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    #qgsyfx {\r\n        width: 100%;\r\n        background-color: @bgGray;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .qgsyfx_sm {\r\n        width: 95%;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .zdfxzb_title {\r\n        width: 100%;\r\n        height: 30px;\r\n        text-align: left;\r\n        line-height: 30px;\r\n        border-bottom: 2px @deepBlack solid;\r\n    }\r\n\r\n    .zdfxzb_title i {\r\n        width: 5%;\r\n        height: 100%;\r\n    }\r\n\r\n    .zdfxzb_title span {\r\n        width: 95%;\r\n        height: 100%;\r\n        font-size: 16px;\r\n        color: @textColor1;\r\n        font-weight: bolder;\r\n    }\r\n\r\n    .zdfxzb_charts {\r\n        width: 100%;\r\n        height: 700px;\r\n        background-color: @bgWhite;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .fangxiangtu {\r\n        width: 100%;\r\n        height: 320px;\r\n        background-color: @bgWhite;\r\n    }\r\n\r\n    .city_selected {\r\n        text-align: center;\r\n        width: 50%;\r\n        height: 100%;\r\n        float: left;\r\n    }\r\n\r\n    .city_selected .el-select {\r\n        width: 20%;\r\n    }\r\n\r\n    .jbfxt_charts {\r\n        width: 50%;\r\n        height: 100%;\r\n        float: left;\r\n    }\r\n\r\n    .jb_table {\r\n        width: 100%;\r\n        height: 100%;\r\n        float: left;\r\n    }\r\n\r\n    .jb_table p {\r\n        width: 100%;\r\n        height: 10%;\r\n        margin-bottom: -30px;\r\n        padding-top: 10px;\r\n        text-align: center;\r\n        font-size: 18px;\r\n        font-family: sans-serif;\r\n        font-style: normal;\r\n        font-weight: bold;\r\n    }\r\n\r\n</style>\r\n"]}]}