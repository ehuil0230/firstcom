{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\login.vue","mtime":1568987312153},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"logining\",\n    data(){\n        return{\n            loginForm:{\n                name: \"baiyu\",\n                password:\"12345678\",\n            },\n            rules: {\n                name: [\n                    {required: true, message: '账号不能为空', trigger: 'blur'},\n                ],\n                password: [\n                    {required: true, message: '密码不能为空', trigger: 'blur'}\n                ],\n            }\n        }\n    },\n    methods:{\n        sumitForm: function () {\n            this.login();\n        },\n        login: function () {\n            const that = this;\n            let userName = that.loginForm.name;\n            let password = that.loginForm.password;\n            // that.$router.replace('/');\n            this.$refs.loginForm.validate((valid) => {\n                if (valid) {\n                    this.$axios({\n                        method: 'post',\n                        url: this.$api.login.login,\n                        data: {\n                            userName: userName,\n                            userPwd: password\n                        }\n                    }).then(function (res) {\n                        window.console.log(res);\n                        if (res.info != null) {\n                            if(res.info.state) {//登录错误情况\n                                switch (res.info.state) {\n                                    case \"1\" :\n                                        that.$message({\n                                            type:\"error\",\n                                            message: '账号状态异常，请联系管理员！'\n                                        });\n                                        break;\n                                    case \"2\" :\n                                        that.$message({\n                                            type:\"error\",\n                                            message: '账号不存在，请重新输入！'\n                                        });\n                                        break;\n                                    case \"3\" :\n                                        that.$message({\n                                            type:\"error\",\n                                            message: '登录错误次数超过过多，请稍后再试！'\n                                        });\n                                        break;\n                                    case \"4\" :\n                                        that.$message({\n                                            type:\"error\",\n                                            message: '密码错误，请重新输入！'\n                                        });\n                                        break;\n                                    default : break;\n                                }\n                                return false;\n                            }\n                            const refreshToken = res.info.refreshToken;\n                            const token = res.info.accessToken;\n                            // axios.defaults.headers.common['Authorization'] = token;//请求token信息配置\n                            localStorage.setItem(\"refreshToken\", refreshToken);\n                            localStorage.setItem(\"Authorization\", token);\n                            that.$axios({\n                                method: 'post',\n                                url: that.$api.login.getLoginUser,\n                                data: {}\n                            }).then(function (res) {\n                                let orgName = res.info.orgName;\n                                let userName = res.info.userName;\n                                localStorage.setItem(\"orgName\", orgName);\n                                localStorage.setItem(\"userName\", userName);\n                                if (that.$route.query.redirect) {\n                                    that.$router.replace(that.$route.query.redirect);\n                                } else {\n                                    that.$router.replace('/');\n                                }\n                            }).catch(function (error) {\n                                window.console.log(error);\n                            });\n                        } else {\n                            that.$alert(res.msg,\"系统异常，请联系管理员！\",{});\n                        }\n                    }).catch(function (error) {\n                        that.$alert(error.msg,\"系统异常，请联系管理员！\",{});\n                    });\n                } else {\n                    return false;\n                }\n            });\n\n        }\n    }\n}\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"login-wrap\">\r\n        <el-container>\r\n            <el-header>\r\n                <div class=\"login-copyright\"></div>\r\n            </el-header>\r\n            <el-main>\r\n                <div class=\"login-bg\">\r\n                    <div class=\"login-panel\">\r\n                        <div class=\"login-panel-tip\">\r\n                            账号密码登录\r\n                        </div>\r\n                        <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\">\r\n                            <el-form-item prop=\"name\">\r\n                            <el-input\r\n                                    placeholder=\"请输入用户名\"\r\n                                    v-model.trim=\"loginForm.name\"\r\n                                    @keyup.enter.native=\"sumitForm\">\r\n                                <i slot=\"prefix\" class=\"el-input__icon el-icon-user-solid\"></i>\r\n                            </el-input>\r\n                            </el-form-item>\r\n                            <el-form-item prop=\"password\">\r\n                            <el-input\r\n                                    type=\"password\"\r\n                                    placeholder=\"请输入密码\"\r\n                                    v-model.trim=\"loginForm.password\"\r\n                                    @keyup.enter.native=\"sumitForm\">\r\n                                <i slot=\"prefix\" class=\"el-input__icon fa fa-lock\"></i>\r\n                            </el-input>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                        <div class=\"login-btn\" @click=\"login\"></div>\r\n                    </div>\r\n                </div>\r\n            </el-main>\r\n            <el-footer>\r\n                <div class=\"login-link\">\r\n                    <el-link disabled>版权所有:中国软件与技术服务股份有限公司</el-link>\r\n                    <br>\r\n                    <el-link disabled>京ICP备05050114号 400-160-1670</el-link>\r\n                </div>\r\n            </el-footer>\r\n        </el-container>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"logining\",\r\n        data(){\r\n            return{\r\n                loginForm:{\r\n                    name: \"baiyu\",\r\n                    password:\"12345678\",\r\n                },\r\n                rules: {\r\n                    name: [\r\n                        {required: true, message: '账号不能为空', trigger: 'blur'},\r\n                    ],\r\n                    password: [\r\n                        {required: true, message: '密码不能为空', trigger: 'blur'}\r\n                    ],\r\n                }\r\n            }\r\n        },\r\n        methods:{\r\n            sumitForm: function () {\r\n                this.login();\r\n            },\r\n            login: function () {\r\n                const that = this;\r\n                let userName = that.loginForm.name;\r\n                let password = that.loginForm.password;\r\n                // that.$router.replace('/');\r\n                this.$refs.loginForm.validate((valid) => {\r\n                    if (valid) {\r\n                        this.$axios({\r\n                            method: 'post',\r\n                            url: this.$api.login.login,\r\n                            data: {\r\n                                userName: userName,\r\n                                userPwd: password\r\n                            }\r\n                        }).then(function (res) {\r\n                            window.console.log(res);\r\n                            if (res.info != null) {\r\n                                if(res.info.state) {//登录错误情况\r\n                                    switch (res.info.state) {\r\n                                        case \"1\" :\r\n                                            that.$message({\r\n                                                type:\"error\",\r\n                                                message: '账号状态异常，请联系管理员！'\r\n                                            });\r\n                                            break;\r\n                                        case \"2\" :\r\n                                            that.$message({\r\n                                                type:\"error\",\r\n                                                message: '账号不存在，请重新输入！'\r\n                                            });\r\n                                            break;\r\n                                        case \"3\" :\r\n                                            that.$message({\r\n                                                type:\"error\",\r\n                                                message: '登录错误次数超过过多，请稍后再试！'\r\n                                            });\r\n                                            break;\r\n                                        case \"4\" :\r\n                                            that.$message({\r\n                                                type:\"error\",\r\n                                                message: '密码错误，请重新输入！'\r\n                                            });\r\n                                            break;\r\n                                        default : break;\r\n                                    }\r\n                                    return false;\r\n                                }\r\n                                const refreshToken = res.info.refreshToken;\r\n                                const token = res.info.accessToken;\r\n                                // axios.defaults.headers.common['Authorization'] = token;//请求token信息配置\r\n                                localStorage.setItem(\"refreshToken\", refreshToken);\r\n                                localStorage.setItem(\"Authorization\", token);\r\n                                that.$axios({\r\n                                    method: 'post',\r\n                                    url: that.$api.login.getLoginUser,\r\n                                    data: {}\r\n                                }).then(function (res) {\r\n                                    let orgName = res.info.orgName;\r\n                                    let userName = res.info.userName;\r\n                                    localStorage.setItem(\"orgName\", orgName);\r\n                                    localStorage.setItem(\"userName\", userName);\r\n                                    if (that.$route.query.redirect) {\r\n                                        that.$router.replace(that.$route.query.redirect);\r\n                                    } else {\r\n                                        that.$router.replace('/');\r\n                                    }\r\n                                }).catch(function (error) {\r\n                                    window.console.log(error);\r\n                                });\r\n                            } else {\r\n                                that.$alert(res.msg,\"系统异常，请联系管理员！\",{});\r\n                            }\r\n                        }).catch(function (error) {\r\n                            that.$alert(error.msg,\"系统异常，请联系管理员！\",{});\r\n                        });\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .login-wrap{\r\n        width: 100%;\r\n        .el-header{\r\n            padding: 0;\r\n            position: relative;\r\n        }\r\n        .el-main{\r\n            padding: 0;\r\n            .login-panel-tip{\r\n                /*margin-top: 20px;\r\n                margin-left: 90px;*/\r\n                width: 260px;\r\n                text-align: center;\r\n                position: absolute;\r\n                top: 20px;\r\n                right: 110px;\r\n                font-size: 18px;\r\n            }\r\n            .el-form{\r\n                width: 260px;\r\n                position: absolute;\r\n                top: 70px;\r\n                right: 110px;\r\n                .el-form-item{\r\n                    margin-bottom: 18px;\r\n                }\r\n            }\r\n        }\r\n        .el-footer{\r\n            text-align: center;\r\n            padding: 0;\r\n            .login-link{\r\n                margin: 10px auto;\r\n                .el-link.el-link--default.is-disabled{\r\n                    color:#606266;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .login-copyright{\r\n        width: 400px;\r\n        height: 60px;\r\n        background-image: url(../assets/login/login_copyright.png);\r\n        background-size: 89% 70%;\r\n        background-repeat: no-repeat;\r\n        position: absolute;\r\n        top: 15px;\r\n        left: 150px;\r\n    }\r\n\r\n    .login-bg{\r\n        position: relative;\r\n        width:100% ;\r\n        /*height:600px;*/\r\n        height:calc(100vh - 120px);\r\n        background-color: #fff;\r\n        background-image: url(../assets/login/login_bg.jpg);\r\n        background-repeat: no-repeat;\r\n        background-position:top left;\r\n        background-size:100% 100%;\r\n    }\r\n    .login-panel{\r\n        width: 400px;\r\n        height: 400px;\r\n        background-image: url(../assets/login/login_panel.png);\r\n        background-size: 80% 80%;\r\n        background-repeat: no-repeat;\r\n        position: absolute;\r\n        top: 14%;\r\n        right: 6%;\r\n        opacity: 0.8;\r\n    }\r\n\r\n    .login-btn{\r\n        width: 400px;\r\n        height: 60px;\r\n        background-image: url(../assets/login/login_btn.png);\r\n        background-size: 67% 77%;\r\n        background-repeat: no-repeat;\r\n        margin-left: 26px;\r\n        margin-top: 200px;\r\n    }\r\n\r\n    .login-btn:hover{\r\n        opacity: 0.6;\r\n    }\r\n\r\n\r\n</style>\r\n"]}]}