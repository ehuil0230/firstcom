{"remainingRequest":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vueWorkspace\\cyfz\\src\\views\\xtgl\\menuPage\\xctj.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vueWorkspace\\cyfz\\src\\views\\xtgl\\menuPage\\xctj.vue","mtime":1571403740194},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vueWorkspace\\cyfz\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TableList from \"../../../components/grid/TableList\";\nimport toolbar from \"@/components/toolbar/myToolbar\";\nimport creOperation from \"@/views/xtgl/myToolbar/creOperation\";\nimport _ from 'lodash'\n//import delOperation from \"@/views/xtgl/myToolbar/delOperation\";\nexport default {\n    name: \"xctj\",\n    components: {\n        TableList,\n        toolbar,\n        creOperation,\n    },\n    data() {\n        return {\n            searchTip:'',\n            stateList: [\n                {\n                    caption: '未发布',\n                    value: '0',\n                },\n                {\n                    caption: '审核中',\n                    value: '2',\n                    formatter: (row) => {\n                        return this.getState(row.value)\n                    }\n                },\n                {\n                    value: '9',\n                    caption: '已发布',\n                },\n            ],\n            xjDialogVisible: false,\n            dialogData: {},\n            checkedData: [],\n            uuids: [],\n            direct: [],\n            //工具栏\n            toolbarItem: [\n                {\n                    type: \"primary\",\n                    title: \"新建\",\n                    icon: \"el-icon-edit-outline\",\n                    disabled: false,\n                    click: \"create\"\n                },\n                {\n                    type: \"primary\",\n                    title: \"修改\",\n                    icon: \"el-icon-edit\",\n                    disabled: false,\n                    click: \"update\"\n                },\n                /*{\n                    type: \"primary\",\n                    title: \"发布\",\n                    icon: \"el-icon-thumb\",\n                    disabled: false,\n                    click: \"release\"\n                },*/\n                {\n                    type: \"primary\",\n                    title: \"删除\",\n                    icon: \"el-icon-delete\",\n                    disabled: false,\n                    click: \"delete\"\n                },\n            ],\n            //查询\n            claimDirectionDm: [],\n            searchParams: {\n                comName: '',\n                claimDirectionName: '',\n                productService: '',\n            },\n            //分页\n            pagination: {\n                currentPage: 1,\n                pageSize: 10,\n                position: 'center',\n                pageSizes: [10, 50, 100],//默认每页显示多少条\n                layout: 'sizes ,prev, pager, next, jumper'\n            },\n            //表单字段\n            columns: [\n                {\n                    label: '推荐重点单位名称',\n                    prop: 'comName',\n                    width: '180',\n                    showOverflowTooltip: true,\n                    template: true\n                },\n                {\n                    label: '所属方向',\n                    prop: 'claimDirectionName',\n                },\n                {\n                    label: '揭榜产品与服务',\n                    prop: 'productService',\n                },\n                {\n                    label: '发布状态',\n                    prop: 'state',\n                    formatter: (row) => {\n                        return this.getCaption(row.state)\n                    }\n                },\n            ],\n            //调用组件传输返回页面数据\n            getDataWay: {\n                dataType: \"url\",\n                data:\n                this.$api.xtglApi.xtglXctjQuery,\n                type: \"post\",\n                param: {\n                    proclamationDm: '0007',\n                    \"tableName\": \"DM_AREA_DIRECTION\",\n                }\n            },\n        }\n    },\n    methods: {\n        //状态初始化\n        getCaption(data) {\n            if (data <= 1) {\n                return '未发布'\n            } else if (data > 1 && data < 9) {\n                //this.tableList.selection.columns.disabled = false\n                return '审核中'\n            } else if (data == 9) {\n                return '已发布'\n            }\n        },\n        refreshTable(refresh) {\n            this.xjDialogVisible = false\n            if (refresh == true) {\n                this.checkedData = []\n                this.$refs.table.loadData()\n            }\n        },\n        initCodeData() {\n            const that = this\n            return new Promise(((resolve, reject) => {\n                this.$$request({\n                    method: 'post',\n                    url: this.$api.getCodeData,\n                    data: {\n                        tableName: \"DM_CLAIM_DIRECTION\"\n                    }\n                }).then((res) => {\n                    if (res.result === 1) {\n                        resolve(res.info)\n                    } else {\n                        that.$alert(res.msg, \"系统异常，请联系管理员！\", {})\n                        return false\n                    }\n                }).catch(function (error) {\n                    reject(error)\n                })\n            }))\n        },\n        //点击工具栏跳转\n        toolbarClick(item, event) {\n            const that = this;\n            if (item.title == '新建') {\n                this.dialogData = {}\n                // 加载下拉框字典数据\n                this.initCodeData().then(res => {\n                    that.dialogData.Dm = res;\n                    this.searchDm = res;\n                    that.dialogData.fromType = '0007';\n                    that.dialogData.spType = '010008';\n                    this.xjDialogVisible = true\n                })\n            }\n            if (item.title == '修改') {\n                if (this.checkedData.length == 1) {\n                    if (this.checkedData[0].state > 1 && this.checkedData[0].state < 9) {\n                        this.$alert('审核状态中无法修改！', '提示', {\n                            type: 'warning'\n                        })\n                    } else if (this.checkedData[0].state == 9) {\n                        this.$alert('已发布内容无法修改！', '提示', {\n                            type: 'warning'\n                        })\n                    } else if(this.checkedData.editFlag===0){\n                        this.$alert('当前登录人不具有修改权限！', '提示', {\n                            type: 'warning'\n                        })\n                    } else {\n                        this.initCodeData().then(res => {\n                            that.dialogData = this.checkedData[0]\n                            that.dialogData.Dm = res;\n                            that.dialogData.fromType = '0007';\n                            that.dialogData.spType = '010008';\n                            this.xjDialogVisible = true\n                        })\n                    }\n                } else {\n                    this.checkedData = []\n                    this.$refs.table.loadData()\n                    this.$alert('请选中一条数据进行修改！', '提示', {\n                        type: 'error'\n                    })\n                }\n            }\n            if (item.title == '删除') {\n                if (that.checkedData.length < 1) {\n                    that.$alert('请选择至少一条数据进行删除！', '提示', {\n                        type: 'warning'\n                    })\n                } else if (that.checkedData.length >= 1) {\n                    let isDel = true\n                    if (isDel) {\n                        this.checkedData.forEach((item) => {\n                            if (item.state > 1 && item.state < 9) {\n                                this.$alert('审核状态中无法删除！', '提示', {\n                                    type: 'warning'\n                                })\n                                isDel = false\n                            } else if (item.state == 9) {\n                                this.$alert('已发布内容无法删除！', '提示', {\n                                    type: 'warning'\n                                })\n                                isDel = false\n                            }else if(this.checkedData.editFlag===0){\n                                this.$alert('当前登录人不具有修改权限！', '提示', {\n                                    type: 'warning'\n                                })\n                                isDel = false\n                            }\n                        })\n                    }\n                    if (isDel) {\n                        let ids = ''\n                        this.checkedData.forEach((item) => {\n                            ids += (item.uuid + ',')\n                        })\n                        that.$confirm('确认删除?', '提示', {\n                            confirmButtonText: '确定',\n                            cancelButtonText: '取消',\n                            type: 'warning'\n                        }).then(() => {\n                            that.$axios({\n                                method: 'post',\n                                url: that.$api.xtglApi.xtglXctjDelete,\n                                data: {\n                                    uuid: ids\n                                },\n                            }).then(\n                                function (res) {\n                                    if (res.result == 1) {\n                                        that.$message({\n                                            message: res.msg,\n                                            type: 'success'\n                                        });\n                                        that.checkedData = [];\n                                        that.$refs.table.loadData()\n                                    } else {\n                                        that.$message({\n                                            type: 'warning',\n                                            message: '删除失败!'\n                                        });\n                                    }\n                                })\n                        }).catch(() => {\n                        });\n                    }\n                }\n            }\n        },\n        //点击标题跳转页面方法\n        selectGg(data) {\n            this.$router.push({\n                name: \"xctjDetail\",\n                query: {\n                    uuid: data.uuid,\n                    moduleCode: 'xctj',\n                }\n            })\n        },\n        //查询---防抖函数，限制后台访问频率\n        searchBtn: _.debounce(function () {\n            const that = this;\n            if (this.searchParams.comName.indexOf('?') === -1) {\n                this.searchTip = ''\n            }\n            let param = {\n                comName: that.searchParams.comName,\n                /*claimDirectionName: that.searchParams.claimDirectionName,\n                productService: that.searchParams.productService,*/\n            }\n            that.$set(that.getDataWay.params = param);\n            that.$refs.table.loadData(param);\n        }, 500),\n    },\n    watch: {\n        'searchParams.comName': {\n            handler(newParams, oldParams) {\n                this.searchTip = '正在输入...'\n                // this.searchTip = this.searchTipControl()\n                //this.debouncedGetSearch()\n            },\n            deep: true,\n            immediate: true\n        },\n    },\n    //获取查询部门列表\n    mounted() {\n        const that = this\n        this.$$request({\n            url: this.$api.getCodeData,\n            data: {\n                tableName: \"DM_CLAIM_DIRECTION\"\n            }\n        }).then(function (res) {\n            that.claimDirectionDm = res.info;\n        })\n    },\n    created() {\n        this.searchTip = '' //首次进入清除提示\n        //码表字段转换\n        /*this.initCodeData().then(res => {\n            for(let i =0;i++;i<res.info.length){\n            }\n            this.res.forEach(item => {\n               this.direct.push(item.CAPTION)\n            })\n            return this.direct\n        })*/\n    }\n    //加载页面前获取Mock数据\n    /*var that = this\n    this.$$request({\n        url: \"http://mockjs.com/api/xctj\",\n        data: {type: 'top', key: '123456'}\n    }).then(function (res) {\n        that.getDataWay.data = res.info.list  //查询请求\n        that.$refs.table.loadData()  //数据加载\n    })*/\n}\n\n",{"version":3,"sources":["xctj.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"xctj.vue","sourceRoot":"src/views/xtgl/menuPage","sourcesContent":["<template>\r\n    <div class=\"rightMain\">\r\n        <!--工具栏-->\r\n        <toolbar position=top :toolbarItem=\"toolbarItem\" @toolbarClick=\"toolbarClick\" center></toolbar>\r\n        <!--工具栏-新建-->\r\n        <creOperation key=\"xctj\" v-if=\"xjDialogVisible\" :dialogData=\"dialogData\" :checkedData=\"checkedData\"\r\n                      @refreshTable=\"refreshTable($event)\"\r\n                      :taVisible=\"xjDialogVisible\" :uuids=\"uuids\"></creOperation>\r\n        <screenFilter :searchParams=\"searchParams\">\r\n            <template slot=\"slot_two\">\r\n                <span style=\"font-size:8px;margin-right:14px;color: #B2B7B7;\">{{searchTip}}</span>\r\n                <el-input class=\"search-name\" size=\"small\" v-model=\"searchParams.comName\" placeholder=\"请输入单位名称\"\r\n                          prefix-icon=\"el-icon-search\" @input=\"searchBtn\">\r\n                </el-input>\r\n            </template>\r\n            <template slot=\"slot_search\">\r\n                <el-form-item label=\"状态\">\r\n                    <el-select v-model=\"searchParams.state\" clearable placeholder=\"选择状态\" style=\"width: 100%\">\r\n                        <el-option v-for=\"item of this.stateList\" :label=\"item.caption\" :value=\"item.value\">\r\n                            {{item.caption}}\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"所属方向\">\r\n                    <el-select v-model=\"searchParams.claimDirectionDm\" placeholder=\"请选择所属方向\">\r\n                        <el-option\r\n                                v-for=\"item in claimDirectionDm\"\r\n                                :key=\"item.CODE\"\r\n                                :label=\"item.CAPTION\"\r\n                                :value=\"item.CODE\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <!--<el-form-item label=\"产品与服务\">\r\n                    <el-input v-model=\"searchParams.productService\"></el-input>\r\n                </el-form-item>-->\r\n            </template>\r\n        </screenFilter>\r\n        <tableList ref=\"table\"\r\n                   selection\r\n                   index\r\n                   style=\"border-top: none;text-align: center\"\r\n                   :getDataWay=\"getDataWay\"\r\n                   :columns=\"columns\"\r\n                   :pagination=\"pagination\"\r\n                   :checkedData='checkedData'\r\n        >\r\n            <el-table-column label=\"推荐重点单位名称\" slot=\"comName\" show-overflow-tooltip>\r\n                <template slot-scope=\"scope\">\r\n                    <el-link :underline=\"false\" @click=\"selectGg(scope.row)\" class=\"a-link\">\r\n                        {{scope.row.comName}}\r\n                    </el-link>\r\n                </template>\r\n            </el-table-column>\r\n        </tableList>\r\n    </div>\r\n</template>\r\n<script>\r\n    import TableList from \"../../../components/grid/TableList\";\r\n    import toolbar from \"@/components/toolbar/myToolbar\";\r\n    import creOperation from \"@/views/xtgl/myToolbar/creOperation\";\r\n    import _ from 'lodash'\r\n    //import delOperation from \"@/views/xtgl/myToolbar/delOperation\";\r\n    export default {\r\n        name: \"xctj\",\r\n        components: {\r\n            TableList,\r\n            toolbar,\r\n            creOperation,\r\n        },\r\n        data() {\r\n            return {\r\n                searchTip:'',\r\n                stateList: [\r\n                    {\r\n                        caption: '未发布',\r\n                        value: '0',\r\n                    },\r\n                    {\r\n                        caption: '审核中',\r\n                        value: '2',\r\n                        formatter: (row) => {\r\n                            return this.getState(row.value)\r\n                        }\r\n                    },\r\n                    {\r\n                        value: '9',\r\n                        caption: '已发布',\r\n                    },\r\n                ],\r\n                xjDialogVisible: false,\r\n                dialogData: {},\r\n                checkedData: [],\r\n                uuids: [],\r\n                direct: [],\r\n                //工具栏\r\n                toolbarItem: [\r\n                    {\r\n                        type: \"primary\",\r\n                        title: \"新建\",\r\n                        icon: \"el-icon-edit-outline\",\r\n                        disabled: false,\r\n                        click: \"create\"\r\n                    },\r\n                    {\r\n                        type: \"primary\",\r\n                        title: \"修改\",\r\n                        icon: \"el-icon-edit\",\r\n                        disabled: false,\r\n                        click: \"update\"\r\n                    },\r\n                    /*{\r\n                        type: \"primary\",\r\n                        title: \"发布\",\r\n                        icon: \"el-icon-thumb\",\r\n                        disabled: false,\r\n                        click: \"release\"\r\n                    },*/\r\n                    {\r\n                        type: \"primary\",\r\n                        title: \"删除\",\r\n                        icon: \"el-icon-delete\",\r\n                        disabled: false,\r\n                        click: \"delete\"\r\n                    },\r\n                ],\r\n                //查询\r\n                claimDirectionDm: [],\r\n                searchParams: {\r\n                    comName: '',\r\n                    claimDirectionName: '',\r\n                    productService: '',\r\n                },\r\n                //分页\r\n                pagination: {\r\n                    currentPage: 1,\r\n                    pageSize: 10,\r\n                    position: 'center',\r\n                    pageSizes: [10, 50, 100],//默认每页显示多少条\r\n                    layout: 'sizes ,prev, pager, next, jumper'\r\n                },\r\n                //表单字段\r\n                columns: [\r\n                    {\r\n                        label: '推荐重点单位名称',\r\n                        prop: 'comName',\r\n                        width: '180',\r\n                        showOverflowTooltip: true,\r\n                        template: true\r\n                    },\r\n                    {\r\n                        label: '所属方向',\r\n                        prop: 'claimDirectionName',\r\n                    },\r\n                    {\r\n                        label: '揭榜产品与服务',\r\n                        prop: 'productService',\r\n                    },\r\n                    {\r\n                        label: '发布状态',\r\n                        prop: 'state',\r\n                        formatter: (row) => {\r\n                            return this.getCaption(row.state)\r\n                        }\r\n                    },\r\n                ],\r\n                //调用组件传输返回页面数据\r\n                getDataWay: {\r\n                    dataType: \"url\",\r\n                    data:\r\n                    this.$api.xtglApi.xtglXctjQuery,\r\n                    type: \"post\",\r\n                    param: {\r\n                        proclamationDm: '0007',\r\n                        \"tableName\": \"DM_AREA_DIRECTION\",\r\n                    }\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            //状态初始化\r\n            getCaption(data) {\r\n                if (data <= 1) {\r\n                    return '未发布'\r\n                } else if (data > 1 && data < 9) {\r\n                    //this.tableList.selection.columns.disabled = false\r\n                    return '审核中'\r\n                } else if (data == 9) {\r\n                    return '已发布'\r\n                }\r\n            },\r\n            refreshTable(refresh) {\r\n                this.xjDialogVisible = false\r\n                if (refresh == true) {\r\n                    this.checkedData = []\r\n                    this.$refs.table.loadData()\r\n                }\r\n            },\r\n            initCodeData() {\r\n                const that = this\r\n                return new Promise(((resolve, reject) => {\r\n                    this.$$request({\r\n                        method: 'post',\r\n                        url: this.$api.getCodeData,\r\n                        data: {\r\n                            tableName: \"DM_CLAIM_DIRECTION\"\r\n                        }\r\n                    }).then((res) => {\r\n                        if (res.result === 1) {\r\n                            resolve(res.info)\r\n                        } else {\r\n                            that.$alert(res.msg, \"系统异常，请联系管理员！\", {})\r\n                            return false\r\n                        }\r\n                    }).catch(function (error) {\r\n                        reject(error)\r\n                    })\r\n                }))\r\n            },\r\n            //点击工具栏跳转\r\n            toolbarClick(item, event) {\r\n                const that = this;\r\n                if (item.title == '新建') {\r\n                    this.dialogData = {}\r\n                    // 加载下拉框字典数据\r\n                    this.initCodeData().then(res => {\r\n                        that.dialogData.Dm = res;\r\n                        this.searchDm = res;\r\n                        that.dialogData.fromType = '0007';\r\n                        that.dialogData.spType = '010008';\r\n                        this.xjDialogVisible = true\r\n                    })\r\n                }\r\n                if (item.title == '修改') {\r\n                    if (this.checkedData.length == 1) {\r\n                        if (this.checkedData[0].state > 1 && this.checkedData[0].state < 9) {\r\n                            this.$alert('审核状态中无法修改！', '提示', {\r\n                                type: 'warning'\r\n                            })\r\n                        } else if (this.checkedData[0].state == 9) {\r\n                            this.$alert('已发布内容无法修改！', '提示', {\r\n                                type: 'warning'\r\n                            })\r\n                        } else if(this.checkedData.editFlag===0){\r\n                            this.$alert('当前登录人不具有修改权限！', '提示', {\r\n                                type: 'warning'\r\n                            })\r\n                        } else {\r\n                            this.initCodeData().then(res => {\r\n                                that.dialogData = this.checkedData[0]\r\n                                that.dialogData.Dm = res;\r\n                                that.dialogData.fromType = '0007';\r\n                                that.dialogData.spType = '010008';\r\n                                this.xjDialogVisible = true\r\n                            })\r\n                        }\r\n                    } else {\r\n                        this.checkedData = []\r\n                        this.$refs.table.loadData()\r\n                        this.$alert('请选中一条数据进行修改！', '提示', {\r\n                            type: 'error'\r\n                        })\r\n                    }\r\n                }\r\n                if (item.title == '删除') {\r\n                    if (that.checkedData.length < 1) {\r\n                        that.$alert('请选择至少一条数据进行删除！', '提示', {\r\n                            type: 'warning'\r\n                        })\r\n                    } else if (that.checkedData.length >= 1) {\r\n                        let isDel = true\r\n                        if (isDel) {\r\n                            this.checkedData.forEach((item) => {\r\n                                if (item.state > 1 && item.state < 9) {\r\n                                    this.$alert('审核状态中无法删除！', '提示', {\r\n                                        type: 'warning'\r\n                                    })\r\n                                    isDel = false\r\n                                } else if (item.state == 9) {\r\n                                    this.$alert('已发布内容无法删除！', '提示', {\r\n                                        type: 'warning'\r\n                                    })\r\n                                    isDel = false\r\n                                }else if(this.checkedData.editFlag===0){\r\n                                    this.$alert('当前登录人不具有修改权限！', '提示', {\r\n                                        type: 'warning'\r\n                                    })\r\n                                    isDel = false\r\n                                }\r\n                            })\r\n                        }\r\n                        if (isDel) {\r\n                            let ids = ''\r\n                            this.checkedData.forEach((item) => {\r\n                                ids += (item.uuid + ',')\r\n                            })\r\n                            that.$confirm('确认删除?', '提示', {\r\n                                confirmButtonText: '确定',\r\n                                cancelButtonText: '取消',\r\n                                type: 'warning'\r\n                            }).then(() => {\r\n                                that.$axios({\r\n                                    method: 'post',\r\n                                    url: that.$api.xtglApi.xtglXctjDelete,\r\n                                    data: {\r\n                                        uuid: ids\r\n                                    },\r\n                                }).then(\r\n                                    function (res) {\r\n                                        if (res.result == 1) {\r\n                                            that.$message({\r\n                                                message: res.msg,\r\n                                                type: 'success'\r\n                                            });\r\n                                            that.checkedData = [];\r\n                                            that.$refs.table.loadData()\r\n                                        } else {\r\n                                            that.$message({\r\n                                                type: 'warning',\r\n                                                message: '删除失败!'\r\n                                            });\r\n                                        }\r\n                                    })\r\n                            }).catch(() => {\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            //点击标题跳转页面方法\r\n            selectGg(data) {\r\n                this.$router.push({\r\n                    name: \"xctjDetail\",\r\n                    query: {\r\n                        uuid: data.uuid,\r\n                        moduleCode: 'xctj',\r\n                    }\r\n                })\r\n            },\r\n            //查询---防抖函数，限制后台访问频率\r\n            searchBtn: _.debounce(function () {\r\n                const that = this;\r\n                if (this.searchParams.comName.indexOf('?') === -1) {\r\n                    this.searchTip = ''\r\n                }\r\n                let param = {\r\n                    comName: that.searchParams.comName,\r\n                    /*claimDirectionName: that.searchParams.claimDirectionName,\r\n                    productService: that.searchParams.productService,*/\r\n                }\r\n                that.$set(that.getDataWay.params = param);\r\n                that.$refs.table.loadData(param);\r\n            }, 500),\r\n        },\r\n        watch: {\r\n            'searchParams.comName': {\r\n                handler(newParams, oldParams) {\r\n                    this.searchTip = '正在输入...'\r\n                    // this.searchTip = this.searchTipControl()\r\n                    //this.debouncedGetSearch()\r\n                },\r\n                deep: true,\r\n                immediate: true\r\n            },\r\n        },\r\n        //获取查询部门列表\r\n        mounted() {\r\n            const that = this\r\n            this.$$request({\r\n                url: this.$api.getCodeData,\r\n                data: {\r\n                    tableName: \"DM_CLAIM_DIRECTION\"\r\n                }\r\n            }).then(function (res) {\r\n                that.claimDirectionDm = res.info;\r\n            })\r\n        },\r\n        created() {\r\n            this.searchTip = '' //首次进入清除提示\r\n            //码表字段转换\r\n            /*this.initCodeData().then(res => {\r\n                for(let i =0;i++;i<res.info.length){\r\n                }\r\n                this.res.forEach(item => {\r\n                   this.direct.push(item.CAPTION)\r\n                })\r\n                return this.direct\r\n            })*/\r\n        }\r\n        //加载页面前获取Mock数据\r\n        /*var that = this\r\n        this.$$request({\r\n            url: \"http://mockjs.com/api/xctj\",\r\n            data: {type: 'top', key: '123456'}\r\n        }).then(function (res) {\r\n            that.getDataWay.data = res.info.list  //查询请求\r\n            that.$refs.table.loadData()  //数据加载\r\n        })*/\r\n    }\r\n\r\n</script>\r\n<style scoped>\r\n    .rightMain {\r\n        margin: 10px auto;\r\n        width: 93%;\r\n        /*margin-right: 90px;\r\n        align:0 auto;\r\n        padding-left: 10px;\r\n        padding-top: 20px;\r\n        min-width: 150px;*/\r\n    }\r\n\r\n    .transition-box {\r\n        margin-bottom: 10px;\r\n        width: 100%;\r\n        height: 300px;\r\n        border-radius: 4px;\r\n        text-align: center;\r\n        color: #fff;\r\n        padding: 40px 20px;\r\n        box-sizing: border-box;\r\n        margin-right: 20px;\r\n    }\r\n</style>"]}]}